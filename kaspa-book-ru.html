<!DOCTYPE html>
<html lang="ru">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="content-type">
<title>Kaspa: Протокол нового поколения</title>
<style type="text/css">
  body {
    font-family: 'Arial', sans-serif;
    line-height: 1.6;
    color: #333;
    background-color: #f8f9fa;
    margin: 0;
    padding: 0;
  }
  .container {
    max-width: 800px;
    margin: 20px auto;
    padding: 20px;
    background-color: #ffffff;
    border: 1px solid #dee2e6;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }
  h1, h2, h3, h4 {
    color: #2c3e50;
    line-height: 1.3;
    page-break-after: avoid;
  }
  h1.book-title {
    font-size: 2.5em;
    text-align: center;
    margin-bottom: 0.5em;
    border-bottom: 2px solid #3498db;
    padding-bottom: 10px;
  }
  h2.chapter-title {
    font-size: 2em;
    margin-top: 1.5em;
    border-bottom: 1px solid #bdc3c7;
    padding-bottom: 5px;
  }
  h3.section-title {
    font-size: 1.5em;
    margin-top: 1.2em;
    color: #34495e;
  }
  h4.subsection-title {
    font-size: 1.2em;
    margin-top: 1em;
    color: #7f8c8d;
  }
  p {
    text-align: justify;
    margin-bottom: 1em;
  }
  .img-container {
    display: block;
    width: 100%;
    max-width: 600px;
    height: auto;
    margin: 20px auto;
    text-align: center;
    box-sizing: border-box;
  }
  .img-container img {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 0 auto;
  }
  .author-date {
    text-align: right;
    font-style: italic;
    color: #7f8c8d;
    margin-bottom: 2em;
  }
  .simplified-def {
    background-color: #ecf0f1;
    border-left: 5px solid #3498db;
    padding: 15px;
    margin: 1.5em 0;
  }
  .simplified-def b {
    color: #2980b9;
  }
  ul {
    list-style-type: disc;
    margin-left: 20px;
    padding-left: 20px;
  }
  li {
    margin-bottom: 0.5em;
  }
  blockquote {
    border-left: 4px solid #bdc3c7;
    padding-left: 15px;
    margin-left: 0;
    font-style: italic;
    color: #7f8c8d;
  }
  hr.chapter-break {
    page-break-before: always;
    border: 0;
  }
  .cover-page {
    text-align: center;
    padding: 100px 20px;
    border: 2px solid #2c3e50;
    margin-bottom: 50px;
  }
  .cover-page .title {
    font-size: 3em;
    color: #2c3e50;
  }
  .cover-page .subtitle {
    font-size: 1.5em;
    color: #7f8c8d;
  }
  .cover-page .author {
    margin-top: 50px;
    font-size: 1.2em;
  }
  .conclusion, .introduction {
      padding: 20px;
      background-color: #eaf2f8;
      border-radius: 5px;
  }
/* Styles для Table of Contents */
.table-of-contents {
  background-color: #f0f8ff; /* Light blue background */
  border: 1px solid #cceeff; /* Light blue border */
  padding: 20px;
  margin: 20px auto;
  border-radius: 8px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}

.table-of-contents .chapter-title {
  text-align: center;
  margin-bottom: 20px;
  color: #2c3e50;
  border-bottom: 1px solid #aaddff;
  padding-bottom: 10px;
}

.table-of-contents ul {
  list-style: none; /* Remove default bullet points */
  padding-left: 0;
}

.table-of-contents ul ul {
  padding-left: 20px; /* Indent for subsections */
  margin-top: 5px;
}

.table-of-contents li {
  margin-bottom: 8px;
}

.table-of-contents li a {
  text-decoration: none;
  color: #3498db; /* Blue link color */
  font-weight: bold;
  transition: color 0.2s ease;
}

.table-of-contents li a:hover {
  color: #2980b9; /* Darker blue on hover */
}

.table-of-contents ul ul li a {
  font-weight: normal; /* Normal font for subsections */
  font-size: 0.95em;
  color: #555; /* Slightly darker color for subsections */
}

.table-of-contents ul ul li a:hover {
  color: #333;
}

.table-of-contents .no-id-link {
    color: #7f8c8d; /* Grey out unlinked items */
    font-style: italic;
}
</style>
</head>
<body>
<div class="container">

  <div class="cover-page">
    <h1 class="title">Kaspa: Протокол нового поколения</h1>
    <p class="subtitle">Полное руководство по BlockDAG, консенсусу и будущему цифровой валюты</p>
    <p class="author">Составлено и дополнено сообществом (27 июля 2025 г.)</p>
  </div>

  <hr class="chapter-break">

  <div class="introduction">
    <h2 class="chapter-title">Введение</h2>
    <p>Добро пожаловать в это всеобъемлющее руководство, посвященное Kaspa, криптовалюте, которая не просто повторяет существующие технологии, а фундаментально переосмысливает их. В экосистеме, где тысячи проектов борются за внимание, Kaspa выделяется строгим подходом и глубокими инновациями, направленными на решение наиболее фундаментальных проблем традиционных блокчейнов: масштабируемости, скорости и децентрализации, без компромиссов.</p>
    <p>Эта книга призвана демистифицировать сложные концепции, лежащие в основе Kaspa. Мы начнем с основ, объяснив, что такое ориентированный ациклический граф (DAG) и как протокол GHOSTDAG от Kaspa использует его для создания быстрой, безопасной и полностью децентрализованной системы консенсуса. Независимо от того, являетесь ли вы любопытным разработчиком, инвестором, стремящимся понять базовую технологию, или просто энтузиастом криптовалют, эта книга призвана шаг за шагом провести вас.</p>
    <p>Мы рассмотрим, как Kaspa решила «трилемму блокчейна», как ее уникальная архитектура обеспечивает почти мгновенные подтверждения и как она устойчиво управляет хранением данных с помощью сложной системы обрезки. Мы также рассмотрим более продвинутые темы, такие как ее устойчивость к MEV (максимально извлекаемой стоимости), ее видение решений второго уровня с ZK-Rollups и экономическую динамику ее рынка комиссий.</p>
    <p>Эта работа является результатом коллективных усилий. Я хочу выразить глубокую благодарность участникам сообщества Kaspa, чьи статьи, исследования и дискуссии легли в основу этой книги. Большая часть содержимого была адаптирована и переведена из бесценных ресурсов, доступных на официальном сайте <strong><a href="https://kaspa.com/learn-kaspa">Kaspa.com/learn-kaspa</a></strong>, а также из работ ее основных исследователей и разработчиков. Особая благодарность также выражается <strong>Cihan0x.ETH (<a href="https://x.com/cihan0xeth/status/1949361083883380833">@cihan0xeth</a>)</strong>, чья работа частично основана на оригинальных анализах <strong>@AbiKaspa</strong>, и <strong>BankQuote_DAG</strong> за их проницательные анализы, которые значительно обогатили эту работу.</p>
    <p>Приготовьтесь погрузиться в одну из самых инновационных архитектур в мире криптовалют. Приготовьтесь понять Kaspa.</p>
  </div>

  <hr class="chapter-break">

<div class="table-of-contents">
      <h2 class="chapter-title">Содержание</h2>
      <ul>
          <li><a href="#h.sbugt7p65zq6">Глава 1: BlockDAG Kaspa</a>
              <ul>
                  <li><a href="#h.52y7zpxatzmc">DAG - Ориентированный ациклический граф</a></li>
                  <li><a href="#h.r0onrjvzaye8">Биткойн и Kaspa</a></li>
              </ul>
          </li>
          <li><a href="#h.q9lxzgpefpuh">Глава 2: Kaspa - Связывание тела с заголовком</a>
              <ul>
                  <li><a href="#h.3ezesbjpkjql">Защита тела блока с заголовком - корень Меркла</a></li>
                  <li><a href="#h.emrhhaf2640n">Биткойн и Kaspa</a></li>
              </ul>
          </li>
          <li><a href="#h.y0ik307h70q9">Глава 3: Kaspa и «проблема масштабируемости Биткойна»</a>
              <ul>
                  <li><a href="#h.2jy3kmwufuue">Kaspa решила «проблему масштабируемости Биткойна» - Что это?</a></li>
                  <li><a href="#h.v4bl36mx6e0u">Биткойн и Kaspa</a></li>
              </ul>
          </li>
          <li><a href="#h.1tq8u5wwr5up">Глава 4: MuHash</a>
              <ul>
                  <li><a href="#h.ny65anmiz0s">Что такое MuHash и как Kaspa его использует?</a></li>
                  <li><a href="#h.focbph7aurgq">Биткойн и Kaspa</a></li>
              </ul>
          </li>
          <li><a href="#h.oy0kgniero14">Глава 5: Модель UTXO Kaspa</a>
              <ul>
                  <li><a href="#h.8nqvw067oam1">Что такое UTXO и как Kaspa его использует?</a></li>
                  <li><a href="#h.5v09d76siagw">Биткойн и Kaspa</a></li>
              </ul>
          </li>
          <li><a href="#h.6x07cz5zmxim">Глава 6: Родители против Mergeset</a>
              <ul>
                  <li><a href="#h.34xcaoqpznos">Что такое Родители и Mergeset и как Kaspa их использует?</a></li>
                  <li><a href="#h.tsab66lazd4a">Биткойн против Kaspa</a></li>
              </ul>
          </li>
          <li><a href="#h.x0nj4tecoh66">Глава 7: Обрезка второго порядка</a>
              <ul>
                  <li><a href="#h.1wbq42gt63wc">Что такое обрезка второго порядка и как Kaspa ее использует?</a></li>
              </ul>
          </li>
          <li><a href="#h.mz2dlkhrvwd2">Глава 8: GHOSTDAG Kaspa упрощенно</a>
              <ul>
                  <li><a href="#h.hwkbrs8egi6p">Что такое GHOSTDAG и как Kaspa его использует?</a></li>
              </ul>
          </li>
          <li><a href="#h.drxg3f8wwuwc">Глава 9: Терминология DAG</a>
          </li>
          <li><a href="#h.1uals18cttyl">Глава 10: Обрезка первого порядка</a>
              <ul>
                  <li><a href="#h.3i8fyh1jrh8m">Что такое обрезка первого порядка и как Kaspa ее использует?</a></li>
              </ul>
          </li>
          <li><a href="#h.juf0jn9hl1ev">Глава 11: Архивные узлы против полных узлов</a>
              <ul>
                  <li><a href="#h.knim47a94vo6">Архивные узлы Kaspa против обрезающих узлов</a></li>
              </ul>
          </li>
          <li><a href="#h.xoj5wjv6tg4b">Глава 12: Kaspa: Эволюция энергоэффективной децентрализованной архитектуры</a>
              <ul>
                  <li><a href="#h.pfav0qmvzt92">Введение: Физика денег и эффективность</a></li>
                  <li><a href="#h.y2juit6511i3">BlockDAG Kaspa: Параллелизм без лишней работы</a></li>
                  <li><a href="#h.ttddfh4xlbpu">Достижение пропускной способности со скоростью света</a></li>
                  <li><a href="#h.uttpgy92hgk">Меньше трения, лучше сохранение стоимости</a></li>
              </ul>
          </li>
          <li><a href="#h.e01avawvoirc">Глава 13: Kaspa против порядка Биткойна</a>
          </li>
          <li><a href="#chapter14">Глава 14: Видение Kaspa для Уровня 2: ZK Rollups и мосты</a></li>
          <li><a href="#chapter15">Глава 15: Сеть Igra: Пример ZK Rollup, совместимого с EVM, от Kaspa</a></li>
          <li><a href="#chapter16">Глава 16: Пропускная способность транзакций и коллизии в BlockDAG Kaspa</a></li>
          <li><a href="#chapter17">Глава 17: Рынок комиссий Kaspa: Теоретико-игровая перспектива</a></li>
          <li><a href="#conclusion">Заключение</a></li>
          <li><a href="#appendixA">Приложение А: Дополнительные ресурсы</a></li>
          <li><a href="#appendixB">Приложение Б: Математический анализ коллизий транзакций (упрощенно)</a></li>
          <li><a href="#appendixC">Приложение В: Математический анализ рынка комиссий (упрощенно)</a></li>
      </ul>
  </div>

  <hr class="chapter-break">

  <h2 class="chapter-title" id="h.sbugt7p65zq6">Глава 1: BlockDAG Kaspa</h2>
  <div class="img-container"><img alt="BlockDAG Kaspa" src="images/image1.png"></div>
  <h3 class="section-title" id="h.52y7zpxatzmc">DAG - Ориентированный ациклический граф</h3>
  <p>Вы, вероятно, слышали, что Kaspa -- это BlockDAG, но что это значит? Эта статья написана с расчетом на отсутствие предварительных знаний, поэтому мы начнем с теории графов. Сначала мы рассмотрим, что такое Граф, затем что такое Ориентированный Граф, затем перейдем к Ориентированному Ациклическому Графу и, наконец, как это применимо как к Биткойну, так и к Kaspa.</p>
  <p><b>Граф</b> - Теория графов, область математики и информатики, фокусируется на изучении графов, которые представляют собой структуры, описывающие отношения между парами сущностей. Эти графы состоят из вершин (также называемых узлами или точками), соединенных ребрами (иногда называемых связями или линиями). Графы классифицируются на неориентированные графы, где соединения между вершинами являются взаимными, и ориентированные графы, где соединения имеют определенное направление. Являясь ключевой областью дискретной математики, теория графов глубоко исследует эти структуры. Следующее изображение иллюстрирует простой неориентированный граф, где соединения не имеют направления.</p>
  <div class="img-container"><img alt="Неориентированный граф" src="images/image63.png"></div>
  <p><b>Ориентированный граф</b> - Ориентированный граф, часто называемый диграфом, представляет собой структуру, используемую для отображения отношений, где соединения между точками имеют определенное направление. В отличие от обычных графов, где соединения идут в обе стороны, в ориентированном графе каждое ребро указывает от одной вершины к другой. В своей простейшей форме ориентированный граф состоит из двух основных частей: набора вершин и набора ребер, где каждое ребро представляет собой пару вершин с четким направлением (от одной вершины к другой, но не наоборот). Например, если у вас есть ребро от вершины X к вершине Y, X является начальной точкой, а Y - конечной. Это ребро соединяет X с Y. Другое ребро может идти от Y к X, но это будет отдельное соединение. В этой базовой конфигурации, называемой простым ориентированным графом, вы не можете иметь несколько ребер с одним и тем же направлением между одними и теми же двумя вершинами, а также не можете иметь ребро, которое начинается и заканчивается в одной и той же вершине (называется петлей). Следующее изображение иллюстрирует ориентированный граф, где ребра имеют направление; обратите внимание, что ребро с двумя указателями представляет два ребра, каждое со своим направлением.</p>
  <div class="img-container"><img alt="Ориентированный граф" src="images/image70.png"></div>
  <p><b>Ориентированный ациклический граф</b> - это ориентированный граф, который не содержит циклов. Он состоит из вершин и ребер, где каждое ребро имеет направление от одной вершины к другой, что гарантирует, что следование направлениям ребер никогда не приводит к замкнутому циклу. Ориентированный граф называется DAG, если его вершины могут быть расположены в линейной последовательности, которая соответствует направлению всех ребер, известной как топологический порядок. Следующее изображение иллюстрирует ориентированный ациклический граф, в котором не может быть найдено ни одного цикла (или петли).</p>
  <div class="img-container"><img alt="Ориентированный ациклический граф (DAG)" src="images/image7.png"></div>

  <div class="simplified-def">
    <h3 class="section-title">Упрощенные определения</h3>
    <p><b>Граф</b> - состоит из вершин и ребер, соединяющих пары вершин, где вершины представляют любой тип объекта, а ребра - связи между ними.</p>
    <p><b>Ориентированный граф</b> - каждое ребро имеет определенное направление, указывающее от одной вершины к другой. Путь в ориентированном графе - это последовательность ребер, где конечная вершина одного ребра является начальной вершиной следующего ребра в последовательности.</p>
    <p><b>Ориентированный ациклический граф</b> - ориентированный граф, в котором ни одна вершина не может достичь себя по пути, включающему одно или несколько ребер, что гарантирует отсутствие циклов.</p>
    <p>О графах можно узнать гораздо больше, но для наших целей нам нужно знать только, что BlockDAG Kaspa -- это всего лишь структура, состоящая из ребер и вершин, соединенных в одном направлении, и что мы никогда не попадаем в цикл, он ациклический, или ориентированный ациклический граф.</p>
  </div>

  <h3 class="section-title" id="h.r0onrjvzaye8">Биткойн и Kaspa</h3>
  <p><b>Биткойн</b> - это DAG, хотя его всегда называют блокчейном, Биткойн использует структуру DAG. Блоки -- это вершины, а их отношения -- это ребра. Каждый блок соединен в одном направлении, и, следуя каждой связи, вы никогда не создадите цикл и всегда вернетесь к Генезису.</p>
  <div class="img-container"><img alt="Структура блокчейна Биткойна как линейный DAG" src="images/image25.png"></div>
  <p><b>Kaspa</b> - это DAG, Kaspa использует структуру DAG. Блоки -- это вершины, а их отношения -- это ребра. Каждый блок соединен в одном направлении, и, следуя каждой связи, вы никогда не создадите цикл и всегда вернетесь к Генезису.</p>
  <div class="img-container"><img alt="Структура BlockDAG Kaspa" src="images/image30.png"></div>
  <p>Так в чем же разница, если и Биткойн, и Kaspa используют DAG? Биткойн позволяет блокам указывать только на один предыдущий блок. Kaspa позволяет блокам указывать на несколько предыдущих блоков. Это единственное структурное различие.</p>

  <hr class="chapter-break">

  <h2 class="chapter-title" id="h.q9lxzgpefpuh">Глава 2: Kaspa - Связывание тела с заголовком</h2>
  <div class="img-container"><img alt="Заголовок блока, связанный с телом блока" src="images/image66.png"></div>
  <h3 class="section-title" id="h.3ezesbjpkjql">Защита тела блока с заголовком - корень Меркла</h3>
  <p>Что защищает тело блока с заголовком? Корень Меркла транзакций в теле.</p>
  <p>Что это значит? Эта статья написана с расчетом на отсутствие предварительных знаний, поэтому мы начнем с дерева Меркла. Что такое дерево Меркла, как оно строится и как оно предотвращает манипуляции. Затем, как оно применяется как к Биткойну, так и к Kaspa.</p>
  <p><b>Дерево Меркла</b> - В криптографии и информатике дерево Меркла, также известное как хеш-дерево, представляет собой древовидную структуру, где каждый «листовой» узел содержит криптографический хеш блока данных. Нелистовые узлы, часто называемые ветвями или внутренними узлами, содержат криптографический хеш меток своих дочерних узлов. Эта структура позволяет эффективно и безопасно проверять содержимое больших наборов данных.</p>
  <div class="img-container"><img alt="Структура дерева Меркла" src="images/image13.png"></div>
  <p><b>Блок данных</b> - В дереве Меркла блок данных -- это сегмент необработанных данных, таких как транзакция, который составляет основу древовидной структуры. Каждый блок данных индивидуально хешируется для получения хеша листового узла.</p>
  <div class="img-container"><img alt="Блоки данных (транзакции)" src="images/image9.png"></div>
  <p><b>Лист</b> - Узел в дереве Меркла, который хранит криптографический хеш одного блока данных. Листовой узел, храня этот хеш, действует как цифровая подпись блока данных.</p>
  <div class="img-container"><img alt="Хеширование транзакций для создания листьев" src="images/image23.png"></div>
  <p><b>Внутренний узел</b> - Родительский узел, который агрегирует хеши своих дочерних узлов. Эти дочерние хеши конкатенируются и хешируются для получения единого хеш-значения, которое является меткой внутреннего узла.</p>
  <div class="img-container"><img alt="Хеширование листьев для создания внутренних узлов" src="images/image58.png"></div>
  <p><b>Корневой хеш</b> - Единственное хеш-значение в самом верхнем узле, инкапсулирующее все данные в дереве. Оно служит компактным и уникальным резюме всех базовых блоков данных. Любое изменение одного листового узла изменяет корневой хеш.</p>
  <div class="img-container"><img alt="Корень Меркла, окончательный хеш" src="images/image5.png"></div>

  <div class="simplified-def">
    <h3 class="section-title">Упрощенные определения</h3>
    <p><b>Дерево Меркла</b> - Древовидная структура, используемая для эффективной проверки целостности данных путем организации блоков данных в структуру криптографических хешей.</p>
    <p><b>Блок данных</b> - Единица информации, такая как транзакция, которая хешируется для создания листового узла.</p>
    <p><b>Лист</b> - Узел, который хранит хеш одного блока данных.</p>
    <p><b>Внутренний узел</b> - Родительский узел, который содержит хеш своих дочерних узлов.</p>
    <p><b>Корневой хеш</b> - Самый верхний узел, содержащий единый хеш, который представляет целостность всего набора данных.</p>
  </div>

  <h3 class="section-title" id="h.emrhhaf2640n">Биткойн и Kaspa</h3>
  <p><b>Биткойн</b> - Дерево Меркла организует данные транзакций внутри каждого блока. Транзакции хешируются в листовые узлы, объединяются в пары и хешируются во внутренние узлы, а затем объединяются в единый корневой хеш, который хранится в заголовке блока. Эта структура позволяет эффективно проверять целостность транзакций.</p>
  <div class="img-container"><img alt="Дерево Меркла в Биткойне" src="images/image18.png"></div>
  <p><b>Kaspa</b> - Дерево Меркла организует данные транзакций внутри каждого блока так же, как и Биткойн. Однако Kaspa допускает сосуществование параллельных блоков, где порядок между этими блоками в DAG не может быть известен. Дерево Меркла зависит от порядка. Как Kaspa решает эту проблему? Добавляя дополнительное дерево Меркла.</p>
  <div class="img-container"><img alt="Дерево Меркла в Kaspa" src="images/image69.png"></div>
  <p>Что защищает тело блока с заголовком? Корень Меркла транзакций в теле (<code>hash_merkle_root</code>).</p>
  <p>Что защищает транзакции mergeset с заголовком? Корень Меркла транзакций в mergeset (<code>accepted_id_merkle_root</code>). Этот второй корень позволяет проверять транзакции из параллельных блоков, которые объединяются, тем самым решая проблему упорядочивания в среде DAG.</p>
  <div class="img-container"><img alt="Два корня Меркла в заголовке блока Kaspa" src="images/image65.png"></div>

  <hr class="chapter-break">

  <h2 class="chapter-title" id="h.y0ik307h70q9">Глава 3: Kaspa и «проблема масштабируемости Биткойна»</h2>
  <div class="img-container"><img alt="Иллюстрация проблемы масштабируемости" src="images/image53.png"></div>
  <h3 class="section-title" id="h.2jy3kmwufuue">Kaspa решила «проблему масштабируемости Биткойна» - Что это?</h3>
  <p>Что такое проблема масштабируемости Биткойна и как Kaspa ее решила? Через включение.</p>
  <p>Что это значит? Эта статья написана с расчетом на отсутствие предварительных знаний, поэтому мы начнем с модели клиент-сервер, затем с одноранговой сети. Что такое сеть P2P, как она выглядит и как в ней распространяются сообщения. Затем, как это применимо как к Биткойну, так и к Kaspa.</p>
  <p><b>Модель клиент-сервер</b> - В клиент-серверной сети централизованная архитектура организует связь и совместное использование ресурсов через один мощный компьютер, называемый сервером, который подключается к нескольким пользовательским устройствам, называемым клиентами. Эта структура обеспечивает эффективное управление, но сильно зависит от сервера, что делает ее уязвимой.</p>
  <div class="img-container"><img alt="Модель клиент-сервер" src="images/image67.png"></div>
  <p><b>Одноранговая (P2P) сеть</b> - Децентрализованная архитектура, которая позволяет осуществлять прямую связь и совместное использование ресурсов между взаимосвязанными узлами. Каждый участник функционирует как клиент и сервер, способствуя устойчивости и масштабируемости сети без опоры на центральный орган.</p>
  <div class="img-container"><img alt="Одноранговая сеть" src="images/image12.png"></div>
  <p><b>Время распространения</b> - В одноранговой сети время распространения - это продолжительность, за которую данные (например, новый блок) перемещаются от одного узла к другим по сети. В течение этого времени разные узлы могут иметь разные представления о состоянии сети.</p>
  <div class="img-container"><img alt="Распространение сообщений в одноранговой сети" src="images/image37.png"></div>
  
  <div class="simplified-def">
    <h3 class="section-title">Упрощенные определения</h3>
    <p><b>Модель клиент-сервер</b> - Центральный компьютер управляет данными для нескольких клиентов.</p>
    <p><b>Одноранговая (P2P) сеть</b> - Несколько компьютеров обмениваются данными напрямую друг с другом без центрального органа.</p>
    <p><b>Узел</b> - Отдельный компьютер, участвующий в одноранговой сети.</p>
    <p><b>Время распространения</b> - Время, необходимое для распространения данных по сети.</p>
  </div>

  <h3 class="section-title" id="h.v4bl36mx6e0u">Биткойн и Kaspa</h3>
  <p><b>Биткойн</b> - Использует одноранговую сеть. Однако его безопасность зависит от того, что скорость создания блоков (10 минут) намного медленнее времени распространения. Если блоки создаются слишком быстро, многие блоки становятся «сиротскими» (отклоненными), что приводит к потере работы и компрометирует безопасность. Это и есть «проблема масштабируемости».</p>
  <div class="img-container"><img alt="Сиротские блоки в Биткойне из-за задержки сети" src="images/image45.png"></div>
  <p><b>Kaspa</b> - Использует инклюзивный протокол (GHOSTDAG), который позволяет блокам указывать на несколько предыдущих блоков. Если параллельные блоки создаются во время распространения, все они включаются в DAG. Сиротских блоков нет. Это позволяет скорости создания блоков быть быстрее времени распространения, тем самым решая проблему масштабируемости при сохранении безопасности.</p>
  <div class="img-container"><img alt="Включение параллельных блоков в Kaspa" src="images/image14.png"></div>

  <hr class="chapter-break">

  <h2 class="chapter-title" id="h.1tq8u5wwr5up">Глава 4: MuHash</h2>
  <div class="img-container"><img alt="Иллюстрация концепции MuHash" src="images/image35.png"></div>
  <h3 class="section-title" id="h.ny65anmiz0s">Что такое MuHash и как Kaspa его использует?</h3>
  <p>Структура для отслеживания UTXO и обрезки старых данных тела блока.</p>
  <p>Что это значит? Эта статья написана с расчетом на отсутствие предварительных знаний, поэтому мы начнем с MuHash. Что такое структура MuHash, как она вычисляется и как она сохраняет свойства умножения. Затем, как это применимо как к Биткойну, так и к Kaspa.</p>
  <p><b>MuHash</b> - В криптографических системах MuHash (мультипликативный хеш) -- это специализированный алгоритм хеширования, предназначенный для эффективного вычисления одного хеш-значения из набора элементов. Он позволяет выполнять инкрементные обновления, что означает, что элементы могут быть добавлены или удалены без пересчета всего хеша, что повышает производительность в динамических наборах данных.</p>
  <div class="img-container"><img alt="Добавление и удаление элементов в MuHash" src="images/image57.png"></div>
  <p><b>Числитель и знаменатель</b> - MuHash использует два счетчика: числитель, который умножает добавленные элементы, и знаменатель, который умножает удаленные элементы. Конечный результат получается путем «деления» числителя на знаменатель (посредством умножения на модульное обратное). Порядок операций не имеет значения, что крайне важно для параллельной обработки.</p>
  <div class="img-container"><img alt="Вычисление MuHash с числителем и знаменателем" src="images/image2.png"></div>
  <div class="img-container"><img alt="Вычисление MuHash с числителем и знаменателем" src="images/image64.png"></div>
  <p><b>Ограничение по простому модулю</b> - Простой модульный номер действует как математическая граница, которая удерживает как числитель, так и знаменатель в управляемом диапазоне во время всех арифметических операций. Каждое умножение выполняется по модулю простого числа, что означает, что независимо от того, сколько элементов добавлено или удалено, результаты всегда «заворачиваются», чтобы оставаться в конечном поле.</p>
  <div class="img-container"><img alt="Ограничение по простому модулю" src="images/image16.png"></div>
  <p><b>Модульное обратное</b> - Модульное обратное -- это математическая операция, которая делает возможным деление в конечном поле, используемом MuHash. Когда вам нужно «разделить» числитель на знаменатель, чтобы получить окончательный хеш-результат, вы фактически умножаете числитель на модульное обратное знаменателя.</p>

  <div class="simplified-def">
    <h3 class="section-title">Упрощенные определения</h3>
    <p><b>MuHash</b> - Структура для быстрого хеширования элементов в наборе, где порядок не имеет значения.</p>
    <p><b>Числитель</b> - Поле, где элементы умножаются при добавлении.</p>
    <p><b>Знаменатель</b> - Поле, где элементы умножаются при удалении.</p>
    <p><b>Ограничение по простому модулю</b> - Простое число, которое определяет математическое поле, где происходят все операции.</p>
    <p><b>Модульное обратное</b> - Операция, которая позволяет «деление» в конечном поле.</p>
    <p>MuHash -- это всего лишь структура, состоящая из числителя и знаменателя, которая позволяет быстро хешировать элементы в наборе в любом порядке без пересчета с нуля.</p>
  </div>

  <h3 class="section-title" id="h.focbph7aurgq">Биткойн и Kaspa</h3>
  <p><b>Биткойн</b> - Полные узлы сохраняют все транзакции, включая старые потраченные транзакции. Обрезка затруднена, поскольку нет эффективного механизма для компактного и проверяемого суммирования состояния транзакций (набора UTXO) без сохранения исторических данных.</p>
  <div class="img-container"><img alt="Полное хранилище блокчейна Биткойна" src="images/image42.png"></div>
  <p><b>Kaspa</b> - Полные узлы обрезают старые данные. Эта возможность обрезать старые данные требует способа удаления всех данных транзакций из каждого блока И криптографической защиты их в каждом заголовке. Kaspa использует MuHash для удаления данных транзакций из блоков (так что после точки обрезки остаются только заголовки DAG) и защиты их в каждом заголовке. Это важный шаг для обрезки. Kaspa разделяет данные транзакций (UTXO) и данные консенсуса (заголовки), что означает, что Kaspa хранит только неизрасходованные транзакции, а не все когда-либо совершенные транзакции. Это снижает требования к хранению по сравнению с Биткойном.</p>
  <div class="img-container"><img alt="Обрезанное хранилище Kaspa с MuHash" src="images/image51.png"></div>

  <hr class="chapter-break">

  <h2 class="chapter-title" id="h.oy0kgniero14">Глава 5: Модель UTXO Kaspa</h2>
  <div class="img-container"><img alt="Иллюстрация модели UTXO" src="images/image74.png"></div>
  <h3 class="section-title" id="h.8nqvw067oam1">Что такое UTXO и как Kaspa его использует?</h3>
  <p>Структура для отслеживания того, кто может тратить Kaspa.</p>
  <p>Что это значит? Эта статья написана с расчетом на отсутствие предварительных знаний, поэтому мы начнем с модели счета и модели UTXO, затем что такое UTXO, что оно содержит и как оно тратится. Затем, как это применимо как к Биткойну, так и к Kaspa.</p>
  <p><b>Модель счета</b> - Модель счета ведет себя как традиционный банковский счет, поддерживая баланс и предлагая привычные операции. Подобно проверке банковского баланса, вы можете запрашивать текущие средства на счете, и аналогично тому, как банки отслеживают историю ваших транзакций, Счет управляет вашим финансовым состоянием. Система предоставляет стандартные операции со счетом, такие как получение депозитов и выполнение переводов, при этом каждый счет имеет свой уникальный идентификатор и имя для простого управления. Доступны несколько типов счетов для удовлетворения различных потребностей, так же как банки предлагают различные типы счетов для разных целей.</p>
  <div class="img-container"><img alt="Модель счета" src="images/image52.png"></div>
  <p><b>Модель UTXO</b> - Модель UTXO ведет себя как физические наличные деньги или монеты в вашем кошельке, где каждая монета имеет определенную стоимость и может быть потрачена только один раз. Подобно тому, как у вас может быть несколько купюр и монет разного номинала в вашем физическом кошельке, цифровой кошелек содержит несколько UTXO разных сумм, которые представляют ваш расходуемый баланс. Когда вы совершаете транзакцию, определенные UTXO потребляются в качестве входов (например, трата точных купюр), и новые UTXO создаются в качестве выходов для получателя и любой сдачи, возвращаемой вам, аналогично тому, как кассир дает вам сдачу, когда вы платите более крупной купюрой. Система отслеживает эти отдельные «монеты» по всем транзакциям, ведя полный учет того, какие UTXO существуют и могут быть потрачены, так же как физические деньги перемещаются от человека к человеку, сохраняя свою индивидуальность.</p>
  <div class="img-container"><img alt="Модель UTXO" src="images/image22.png"></div>
  <p><b>Структура UTXO</b> - UTXO (неизрасходованный выход транзакции) структурирован как цифровая квитанция, которая содержит всю необходимую информацию для его траты, подобно тому, как чек содержит сумму, данные получателя и информацию об авторизации. Каждый UTXO содержит объем удерживаемой им стоимости и определяет условия траты. Подобно тому, как физическая монета имеет свой номинал и может быть проверена на подлинность, каждый UTXO несет свою стоимость и криптографическое доказательство владения, что делает его самодостаточной единицей стоимости, которую можно проверить и потратить независимо. Система обрабатывает каждый UTXO как дискретный объект с его собственным уникальным идентификатором, что позволяет точно отслеживать отдельные единицы стоимости по мере их перемещения по сети.</p>
  <div class="img-container"><img alt="Структура UTXO" src="images/image17.png"></div>
  <p><b>Трата UTXO</b> - Трата UTXO ведет себя как использование физических наличных денег, когда вы должны предъявить точную купюру или монету для совершения покупки, и после траты она не может быть использована снова. Процесс начинается с определения конкретного UTXO, который вы хотите потратить, и проверки его существования в наборе UTXO, аналогично проверке того, что купюра в вашем кошельке подлинна и не потрачена. При создании транзакции вы ссылаетесь на UTXO по его уникальному идентификатору и предоставляете скрипт подписи, который доказывает ваше право тратить его. Система проверяет, что UTXO еще не был потрачен (предотвращая двойную трату), проверяет, что вы соответствуете условиям траты, а затем удаляет UTXO из набора доступных для траты, создавая новые UTXO в качестве выходов, завершая передачу стоимости от одной стороны к другой.</p>
  <div class="img-container"><img alt="Процесс траты UTXO" src="images/image31.png"></div>

  <div class="simplified-def">
    <h3 class="section-title">Упрощенные определения</h3>
    <p><b>Модель счета</b> - Система, которая поддерживает единый баланс для каждого счета.</p>
    <p><b>Модель UTXO</b> - Система, которая отслеживает отдельные «монеты» стоимости.</p>
    <p><b>UTXO</b> - Неизрасходованный выход транзакции, представляющий определенную сумму денег.</p>
    <p><b>Трата UTXO</b> - Процесс потребления UTXO для создания новых UTXO.</p>
    <p>UTXO -- это всего лишь структура для отслеживания того, кто что может потратить.</p>
  </div>

  <h3 class="section-title" id="h.5v09d76siagw">Биткойн и Kaspa</h3>
  <p><b>Биткойн</b> - Использует модель UTXO. Транзакции представляют собой наборы потребленных и созданных UTXO, хранящиеся в теле каждого блока.</p>
  <div class="img-container"><img alt="Модель UTXO в Биткойне" src="images/image27.png"></div>
  <p><b>Kaspa</b> - Также использует модель UTXO. Основное различие заключается в том, как эти UTXO управляются и проверяются в среде BlockDAG, что позволяет параллельную обработку и более быстрые подтверждения.</p>
  <div class="img-container"><img alt="Модель UTXO в Kaspa" src="images/image44.png"></div>

  <hr class="chapter-break">

  <h2 class="chapter-title" id="h.6x07cz5zmxim">Глава 6: Родители против Mergeset</h2>
  <div class="img-container"><img alt="Связи между блоками в DAG" src="images/image4.png"></div>
  <h3 class="section-title" id="h.34xcaoqpznos">Что такое Родители и Mergeset и как Kaspa их использует?</h3>
  <p>Два разных способа описания отношений между блоками в структуре BlockDAG Kaspa.</p>
  <p><b>Традиционные родители блокчейна</b> - В линейном блокчейне, таком как Биткойн, у каждого блока есть ровно один родитель (кроме генезиса), что создает простую цепную структуру. Родительская связь проста: каждый новый блок ссылается на хеш предыдущего блока, образуя непрерывную последовательность от генезиса до текущего конца.</p>
  <div class="img-container"><img alt="Родительская связь в Биткойне" src="images/image34.png"></div>
  <p><b>Сложность родителей DAG</b> - BlockDAG Kaspa позволяет блокам иметь несколько родителей, создавая более сложную сеть отношений. При создании блока он может ссылаться на несколько существующих блоков в качестве родителей, что позволяет создавать параллельные блоки и повышать пропускную способность.</p>
  <div class="img-container"><img alt="Множественные родительские связи в Kaspa" src="images/image36.png"></div>
  <p><b>Родители</b> - Родители -- это блоки, на которые новый блок ссылается непосредственно в своем заголовке. Это явные отношения, объявленные создателем блока -- это блоки, на которых непосредственно строится этот новый блок. Когда вы просматриваете визуализатор DAG Kaspa, эти стрелки представляют родительскую связь.</p>
  <div class="img-container"><img alt="Новый блок, указывающий на своих родителей" src="images/image11.png"></div>
  <p><b>Как работают родители</b> - При создании блока майнеры выбирают существующие блоки для ссылки в качестве родителей, основываясь на том, что они считают текущими «вершинами» DAG. Система проверяет эти родительские связи и использует их для определения положения блока в структуре DAG. Здесь вы можете увидеть, как создается новый блок, ссылающийся на «вершины» DAG, блоки, найденные без указания на них другим блоком.</p>
  <div class="img-container"><img alt="Создание нового блока и выбор вершин" src="images/image56.png"></div>
  <p><b>Mergeset</b> - Mergeset -- это набор блоков, которые находятся в антиконе выбранного родителя блока, но все еще считаются частью контекста консенсуса блока. Здесь блок C находится в антиконе B, а блок B -- в антиконе C.</p>
  <div class="img-container"><img alt="Иллюстрация Mergeset блока" src="images/image29.png"></div>
  <p><b>Как вычисляется Mergeset</b> - Mergeset вычисляется путем нахождения всех блоков, которые не являются предками выбранного родителя, но все еще достижимы через набор родителей блока. Это создает более широкий контекст блоков, которые должны быть рассмотрены для принятия консенсусных решений. В этом примере, если блок B является выбранным родителем, Mergeset создаваемого блока будет включать как блок C, так и блок D.</p>
  <div class="img-container"><img alt="Вычисление Mergeset" src="images/image47.png"></div>
  <p><b>Mergeset в GHOSTDAG</b> - Протокол GHOSTDAG обрабатывает Mergeset для определения того, какие блоки должны быть окрашены в «синий» (способствующие консенсусу) или «красный» (действительные, но не способствующие). Этот процесс окрашивания необходим для поддержания консенсуса в параллельной блочной среде.</p>

  <h3 class="section-title">Как родители и Mergeset работают вместе</h3>
  <p><b>Выбор выбранного родителя</b> - Среди всех родителей система выбирает одного в качестве «выбранного родителя» -- того, у кого наибольшая «синяя работа». Это создает основу основной цепи через DAG, признавая при этом другие родительские отношения. Здесь выделена родительская цепь.</p>
  <div class="img-container"><img alt="Выбор выбранного родителя и основная цепь" src="images/image75.png"></div>
  <p><b>Обработка Mergeset</b> - После выбора родителя Mergeset вычисляется и обрабатывается для определения окончательных данных GHOSTDAG. Mergeset исключает выбранного родителя, так как он уже учтен в основной цепи. Здесь Mergeset включает блок C, так как он находится в антиконе блока B (выбранного родителя), хотя он не является родителем нового блока (родители включают только блок B и блок D).</p>
  <div class="img-container"><img alt="Обработка Mergeset" src="images/image26.png"></div>
  <p><b>Выбор виртуального родителя</b> - При создании виртуального состояния система использует оба понятия: она выбирает виртуальных родителей из блоков-кандидатов, одновременно обеспечивая, чтобы результирующий mergeset не превышал пределов размера. Это уравновешивает включение многих параллельных блоков при сохранении управляемой сложности консенсуса.</p>

  <h3 class="section-title">Практические различия</h3>
  <p><b>Хранение и итерация</b> - Родители хранятся непосредственно в заголовках блоков, тогда как данные Mergeset вычисляются и хранятся отдельно в структурах данных GHOSTDAG. Система предоставляет различные итераторы для доступа к блокам Mergeset в различных порядках (порядок консенсуса, порядок «синей работы» и т. д.).</p>
  <p><b>Влияние на консенсус</b> - Родители определяют базовую структуру DAG, но Mergeset определяет, какие блоки фактически способствуют консенсусным расчетам, таким как «синий счет» и «синяя работа». Блок может быть родителем, но в конечном итоге быть окрашен в красный цвет в Mergeset, что означает, что он не способствует основной цепи консенсуса.</p>

  <div class="simplified-def">
    <h3 class="section-title">Упрощенные определения</h3>
    <p><b>Родители</b> - Блоки, на которые новый блок ссылается непосредственно в своем заголовке, устанавливая явные отношения в DAG.</p>
    <p><b>Mergeset</b> - Набор блоков в антиконе блока, которые рассматриваются для обработки консенсуса, исключая выбранного родителя.</p>
    <p><b>Выбранный родитель</b> - Родитель с наибольшей «синей работой», образующий основу основной цепи.</p>
    <p><b>Синий/Красный Mergeset</b> - Блоки в Mergeset, которые способствуют консенсусу (синие) или нет (красные).</p>
    <p>Родители определяют структуру DAG, тогда как Mergeset определяет участие в консенсусе.</p>
  </div>

  <h3 class="section-title" id="h.tsab66lazd4a">Биткойн против Kaspa</h3>
  <p><b>Биткойн</b> - Имеет только одного родителя на блок (кроме генезиса), поэтому нет различия между родителями и Mergeset. Единственный родитель является как структурной, так и консенсусной связью.</p>
  <div class="img-container"><img alt="Простая структура Биткойна" src="images/image55.png"></div>
  <p><b>Kaspa</b> - Разделяет структурные отношения (родители) от консенсусных отношений (Mergeset). Множественные родители создают структуру DAG, но обработка Mergeset определяет, какие блоки фактически способствуют консенсусному состоянию.</p>
  <div class="img-container"><img alt="Сложная структура Kaspa с родителями и Mergeset" src="images/image24.png"></div>

  <hr class="chapter-break">

  <h2 class="chapter-title" id="h.x0nj4tecoh66">Глава 7: Обрезка второго порядка</h2>
  <div class="img-container"><img alt="Иллюстрация обрезки второго порядка" src="images/image48.png"></div>
  <h3 class="section-title" id="h.1wbq42gt63wc">Что такое обрезка второго порядка и как Kaspa ее использует?</h3>
  <p>Обрезка второго порядка -- это продвинутый шаг в оптимизации хранения Kaspa, который удаляет данные, связанные с консенсусом, сохраняя при этом возможность проверять новые блоки и участвовать в сетевом консенсусе. Она выходит за рамки обрезки первого порядка, выборочно удаляя данные структуры DAG, отношения и некоторые заголовки.</p>
  <p>Почему «Второй порядок»? - Эта терминология подчеркивает, что после удаления тел блоков (первый порядок) Kaspa может удалять дополнительные данные консенсуса, сохраняя при этом возможности проверки. Обрезка второго порядка обеспечивает максимальную эффективность хранения за счет удаления избыточной информации консенсуса, которая не является существенной для непрерывной проверки.</p>
  <p>Что это значит? - Эта статья предполагает знание обрезки первого порядка, поэтому мы начнем с данных консенсуса, которые существуют после обрезки первого порядка, затем объясним, как обрезка второго порядка выборочно удаляет структуры консенсуса, что сохраняется, а что удаляется, и как проверка продолжает функционировать с уменьшенными данными консенсуса.</p>

  <h3 class="section-title">Обрезка первого порядка против обрезки второго порядка</h3>
  <p><b>Основа обрезки первого порядка</b> - После обрезки первого порядка узлы сохраняют все заголовки блоков, данные GHOSTDAG, отношения доступности и информацию о структуре DAG. Это позволяет полностью проверять консенсус, но все еще требует значительного объема памяти для сложных отношений DAG, которые поддерживает Kaspa.</p>
  <p><b>Вызов обрезки второго порядка</b> - Задача состоит в том, чтобы определить, какие данные консенсуса могут быть безопасно удалены без ущерба для способности узла проверять новые блоки. Система должна сохранить достаточно структурной информации для поддержания консенсуса, одновременно удаляя избыточные данные.</p>

  <h3 class="section-title">Многоуровневая система доказательств</h3>
  <p><b>Классификация уровня доказательства</b> - Система обрезки Kaspa классифицирует блоки на основе их важности для различных уровней доказательства. Блоки, связанные с более высокими уровнями доказательства, сохраняют больше данных консенсуса, чем те, которые необходимы только для более низких уровней.</p>
  <p><b>Хранение данных на основе уровня</b> - Система определяет, какие данные консенсуса сохранять, исходя из уровня доказательства, к которому принадлежит каждый блок. Блоки более высокого уровня сохраняют больше связей и информации о консенсусе, в то время как блоки более низкого уровня могут безопасно удалять свои данные консенсуса.</p>
  <p><b>Смежные зоны DAG</b> - Обрезка гарантирует, что для каждого уровня оставшиеся отношения представляют собой смежную зону DAG, сохраняя структурную целостность, необходимую для проверки консенсуса.</p>

  <h3 class="section-title">Что удаляется при обрезке второго порядка</h3>
  <p><b>Удаление данных об отношениях</b> - Обрезка второго порядка удаляет данные об отношениях, специфичные для уровня, для блоков, которые принадлежат только к более высоким уровням доказательства. Это сохраняет семантику, согласно которой отношения представляют собой смежные зоны DAG, одновременно удаляя ненужные данные более низкого уровня.</p>
  <p><b>Выборочное удаление данных GHOSTDAG</b> - Система удаляет данные GHOSTDAG для определенных блоков, сохраняя их для существенной проверки консенсуса. Данные GHOSTDAG удаляются на уровне 0 для частично обрезанных блоков.</p>
  <p><b>Удаление заголовков</b> - В наиболее агрессивной форме обрезки второго порядка некоторые заголовки блоков могут быть удалены, при этом сохраняются прошлые точки обрезки. Удаляются только несущественные заголовки для запросов точек обрезки.</p>

  <h3 class="section-title">Что сохраняется при обрезке второго порядка</h3>
  <p><b>Существенные структуры консенсуса</b> - Критические данные консенсуса, такие как антиконус точки обрезки, блоки окна DAA и блоки GHOSTDAG для существенной проверки, всегда сохраняются. Это гарантирует, что операции консенсуса могут продолжаться даже при уменьшенном объеме хранения данных.</p>
  <p><b>Принадлежность к уровню доказательства</b> - Блоки сохраняют свою классификацию на основе важности уровня доказательства, определяя, какие данные сохраняются. Система сохраняет минимально необходимые данные для проверки консенсуса на основе этих принадлежностей.</p>
  <p><b>Прошлые точки обрезки</b> - Заголовки для прошлых точек обрезки всегда сохраняются, чтобы сохранить возможность отвечать на запросы точек обрезки и поддерживать систему доказательства обрезки.</p>

  <h3 class="section-title">Как продолжается проверка консенсуса</h3>
  <p><b>Переходы состояний</b> - Блоки, проходящие обрезку второго порядка, переходят в состояние «только заголовок», если они имели действительное состояние и принадлежали к уровню доказательства. Это сохраняет семантику, согласно которой действительное состояние подразумевает существование существенных данных консенсуса.</p>
  <p><b>Проверка уменьшенных данных</b> - Даже при обрезке второго порядка узлы могут проверять новые блоки, используя сохраненные структуры данных консенсуса и оставшиеся отношения. Система сохраняет достаточно информации для проверки правил GHOSTDAG и отношений между блоками.</p>
  <p><b>Проверка на основе доказательств</b> - Сохраненные данные уровня доказательства позволяют узлам проверять блоки с использованием криптографических доказательств, а не полных исторических данных консенсуса, что позволяет участвовать в консенсусе со значительно уменьшенным объемом хранения.</p>

  <h3 class="section-title">Архивные узлы против обрезающих узлов</h3>
  <p><b>Поведение архивного узла</b> - Узлы, настроенные как архивные, полностью игнорируют обрезку первого и второго порядка, сохраняя все данные консенсуса. Эти узлы служат полным консенсусным реестром сети, но требуют максимального объема хранения.</p>
  <p><b>Эффективность обрезающего узла</b> - Обычные обрезающие узлы используют обрезку второго порядка для достижения максимальной эффективности хранения при сохранении полных возможностей проверки консенсуса через многоуровневую систему доказательств.</p>
  <p>Примечание: Подробное объяснение того, как обрезающие узлы остаются полными узлами и почему архивные узлы являются необязательными для работы сети (сохраняя модель Биткойна без доверия), см. в расширенной статье «Архивный узел против полного узла», которая охватывает возможности проверки, криптографические доказательства и устойчивость сети.</p>

  <div class="simplified-def">
    <h3 class="section-title">Упрощенные определения</h3>
    <p><b>Обрезка второго порядка</b> - Удаление данных, связанных с консенсусом, с сохранением достаточной информации для проверки правил консенсуса.</p>
    <p><b>Принадлежность к уровню доказательства</b> - Классификация блоков на основе уровней доказательства, к которым они принадлежат, определяющая, какие данные консенсуса сохраняются.</p>
    <p><b>Статус «только заголовок»</b> - Блоки, данные консенсуса которых были обрезаны, но которые сохраняют существенную информацию для проверки.</p>
    <p><b>Смежные зоны DAG</b> - Поддержание структурной целостности в оставшихся данных консенсуса после обрезки.</p>
    <p>Обрезка второго порядка обеспечивает максимальную эффективность хранения при сохранении возможностей проверки консенсуса благодаря интеллектуальной классификации данных.</p>
  </div>

  <h3 class="section-title">Биткойн против Kaspa: Обрезка данных консенсуса</h3>
  <p><b>Биткойн</b> - Информация о консенсусе необходима для проверки и не может быть безопасно удалена.</p>
  <p><b>Kaspa</b> - Сложная структура DAG и многоуровневая система доказательств позволяют осуществлять сложную обрезку второго порядка, при которой различные уровни данных консенсуса могут быть выборочно удалены в зависимости от их важности для проверки. Это позволяет значительно агрессивнее оптимизировать хранилище, сохраняя при этом возможности консенсуса.</p>

  <hr class="chapter-break">

  <h2 class="chapter-title" id="h.mz2dlkhrvwd2">Глава 8: GHOSTDAG Kaspa упрощенно</h2>
  <div class="img-container"><img alt="Иллюстрация GHOSTDAG" src="images/image43.png"></div>
  <h3 class="section-title" id="h.hwkbrs8egi6p">Что такое GHOSTDAG и как Kaspa его использует?</h3>
  <p>Протокол консенсуса, который упорядочивает блоки в структуре DAG, сохраняя при этом свойства безопасности.</p>
  <p>Что это значит? Эта статья объясняет GHOSTDAG, начиная с традиционного консенсуса, затем подход GHOSTDAG, как он классифицирует блоки и как он отличается между Биткойном и Kaspa.</p>

  <h3 class="section-title">Традиционный консенсус - Линейный порядок цепи</h3>
  <p>Традиционный консенсус блокчейна работает на линейной цепи, где блоки образуют единую последовательность. Каждый блок имеет ровно одного родителя (кроме генезиса), что создает простой механизм упорядочивания. При возникновении конфликтов (несколько блоков на одной высоте) сеть выбирает один блок и отбрасывает остальные как сиротские. Этот подход обеспечивает четкий порядок, но ограничивает пропускную способность, поскольку на каждом уровне может быть принят только один блок.</p>
  <div class="img-container"><img alt="Традиционный консенсус" src="images/image32.png"></div>

  <h3 class="section-title">Протокол GHOSTDAG - Консенсус DAG</h3>
  <p>GHOSTDAG расширяет консенсус для работы со структурами ориентированного ациклического графа (DAG), где блоки могут иметь несколько родителей. Протокол обрабатывает блоки, сначала выбирая родителя с наибольшей «синей работой», затем исследуя все блоки в Mergeset, чтобы классифицировать их как «синие» (честные) или «красные» (потенциально конфликтные). Эта классификация основана на математических ограничениях, включающих параметр безопасности K, который ограничивает размер антиконов для поддержания свойств безопасности.</p>
  <div class="img-container"><img alt="Протокол GHOSTDAG" src="images/image40.png"></div>

  <h3 class="section-title">Правила классификации блоков</h3>
  <p>GHOSTDAG классифицирует блоки, используя два ключевых ограничения, связанных с параметром безопасности K. Во-первых, количество синих блоков в антиконе блока-кандидата не должно превышать K блоков. Во-вторых, для каждого существующего синего блока добавление кандидата не должно приводить к тому, чтобы антикон любого синего блока превышал K блоков. Алгоритм отслеживает размер антикона для эффективной проверки этих ограничений во время обработки блока. Серый блок здесь в настоящее время проверяется сетью, блок C является его выбранным родителем. Если k=0, то блок цепи C уже является 1 синим блоком, что приводит к классификации блока B как красного. Если k = 1 (или более), блок B классифицируется как синий, так как он имеет только 1 синий блок (блок C) в своем антиконе.</p>
  <div class="img-container"><img alt="Правила классификации блоков" src="images/image28.png"></div>

  <h3 class="section-title">Накопление синей работы</h3>
  <p>Протокол накапливает доказательство работы только от синих блоков, создавая метрику «Синяя работа». Синие блоки вносят свою вычислительную работу в совокупную оценку безопасности, в то время как красные блоки исключаются из этого расчета. Это избирательное накопление гарантирует, что только консенсусно-действительные блоки способствуют сетевой безопасности, предотвращая подрыв системы вредоносными или конфликтными блоками. В этом примере, предполагая, что блок B красный (k=0), «Синяя работа» нашего серого блока будет рассчитана как «Синяя работа», унаследованная от блока C, плюс «Синяя работа» блока C. Если блок B синий, «Синяя работа» нашего нового блока унаследует «Синюю работу» своего выбранного родителя (блока C), затем добавит «Синюю работу» своего выбранного родителя (C) и «Синюю работу» синих блоков в своем Mergeset (блоке B).</p>
  <div class="img-container"><img alt="Накопление синей работы" src="images/image62.png"></div>

  <h3 class="section-title">Выбор и порядок родителей</h3>
  <p>GHOSTDAG определяет порядок блоков путем выбора родителя на основе значений «синей работы». Протокол выбирает родителя с наибольшим накопленным значением «синей работы» в качестве «выбранного родителя», создавая магистральную цепь в структуре DAG. Порядок блоков использует «синюю работу» в качестве основного критерия, при этом хеш заголовка блока обеспечивает детерминированный порядок в случае равенства. В нашем примере мы предполагаем, что блок C является выбранным родителем, а блок B -- синим. Порядок обработки транзакций: 1. Выбранный родитель (C) 2. Упорядоченный Mergeset (B)</p>
  <div class="img-container"><img alt="Выбор и порядок родителей" src="images/image6.png"></div>

  <h3 class="section-title">Хранение и управление данными</h3>
  <p>Протокол хранит результаты классификации в структурированных данных, содержащих списки синих и красных блоков. Синие блоки добавляются с отслеживанием размера антикона для будущих решений по классификации, а красные блоки просто добавляются в красный список. Такая организация поддерживает полную информацию о DAG, четко различая роли консенсуса.</p>

  <div class="simplified-def">
    <h3 class="section-title">Упрощенные определения</h3>
    <p><b>Традиционный консенсус</b> - Линейная система упорядочивания цепей, где блоки образуют единую последовательность с одним родителем на блок.</p>
    <p><b>Протокол GHOSTDAG</b> - Механизм консенсуса DAG, который классифицирует блоки как синие или красные на основе ограничений размера антикона.</p>
    <p><b>Классификация блоков</b> - Процесс определения того, являются ли блоки синими (консенсусно-действительными) или красными (потенциально конфликтными).</p>
    <p><b>Накопление синей работы</b> - Выборочный подсчет доказательства работы, который включает только работу от синих блоков.</p>
    <p>GHOSTDAG -- это протокол консенсуса, который обеспечивает структуры DAG, сохраняя при этом свойства безопасности блокчейна.</p>
  </div>

  <h3 class="section-title">Биткойн и Kaspa</h3>
  <p><b>Биткойн</b> - Использует традиционный линейный цепной консенсус, где блоки образуют единую последовательность. Конфликтующие блоки становятся сиротскими и не способствуют безопасности. Самая длинная цепь (наибольшее количество накопленной работы) определяет консенсус с помощью простого механизма сравнения.</p>
  <div class="img-container"><img alt="Биткойн и GHOSTDAG" src="images/image71.png"></div>
  <p><b>Kaspa</b> - Использует протокол GHOSTDAG для управления структурами DAG с несколькими параллельными блоками. Синие блоки способствуют безопасности посредством накопления «синей работы», в то время как красные блоки остаются в DAG, но исключаются из консенсусных решений. Протокол поддерживает оба типа блоков для всестороннего отслеживания состояния сети.</p>
  <div class="img-container"><img alt="Kaspa и GHOSTDAG" src="images/image19.png"></div>

  <hr class="chapter-break">

  <h2 class="chapter-title" id="h.drxg3f8wwuwc">Глава 9: Терминология DAG</h2>
  <div class="img-container"><img alt="Терминология DAG" src="images/image8.png"></div>
  <h3 class="section-title">Прошлое, Будущее, Антиконус, Mergeset, параметр K, что это все значит?</h3>
  <p>Прошлое, Будущее и Антиконус -- это термины DAG, тогда как Mergeset и K используются в GHOSTDAG.</p>
  <p>Терминология DAG -- это специализированный словарь для описания отношений в структуре BlockDAG. Мы начнем с линейной цепи, DAG, затем немного GHOSTDAG.</p>

  <h3 class="section-title">Терминология линейной цепи - Традиционный блокчейн</h3>
  <p>Терминология линейной цепи использует простые понятия, где блоки образуют единую последовательность. Каждый блок имеет родителя и потенциально ребенка, создавая простые отношения предок-потомок. Термины, такие как «высота», «предыдущий блок» и «следующий блок», описывают линейное развитие. При возникновении конфликтов блоки либо «принимаются» в основную цепь, либо «сиротеют» и отбрасываются.</p>
  <div class="img-container"><img alt="Терминология линейной цепи" src="images/image15.png"></div>

  <h3 class="section-title">Терминология DAG</h3>
  <p>Разрешение блокам иметь несколько родителей создает новые отношения внутри DAG.</p>
  <div class="img-container"><img alt="Терминология DAG" src="images/image50.png"></div>

  <h3 class="section-title">Отношения Прошлое и Будущее - DAG</h3>
  <p>Отношение «Прошлое» определяет все блоки, достижимые путем следования по родительским ссылкам назад от заданного блока. Блок находится в прошлом другого, если существует направленный путь, соединяющий их. Отношение «Будущее» работает наоборот -- если блок A находится в прошлом блока B, то B находится в будущем блока A.</p>
  <div class="img-container"><img alt="Отношения Прошлое и Будущее - DAG" src="images/image73.png"></div>

  <h3 class="section-title">Отношение антиконуса - DAG</h3>
  <p>Антиконус описывает блоки, которые не являются ни предками, ни потомками друг друга -- они существуют одновременно в DAG. Два блока находятся в антиконусе друг друга, если ни один из них не может достичь другого по направленному пути. Это отношение имеет решающее значение для параметра безопасности K GHOSTDAG, который ограничивает размер антиконусов для поддержания безопасности консенсуса. Здесь блок B и блок C находятся в антиконусе друг друга, блок B недоступен из блока C, а блок C недоступен из блока B.</p>
  <div class="img-container"><img alt="Отношение антиконуса - DAG" src="images/image59.png"></div>

  <h3 class="section-title">Mergeset и классификация «синий/красный» - GHOSTDAG</h3>
  <p>Mergeset относится к набору блоков, которые объединяются при создании нового блока. Mergeset содержит прямых родителей блока, но также может содержать блоки, которые не являются прямыми родителями. GHOSTDAG классифицирует блоки в Mergeset как «синие» (честные) или «красные» (потенциально конфликтные) на основе ограничений размера антикона. Эта классификация определяет, какие блоки способствуют безопасности сети посредством накопления «синей работы». Вот пример блока B, классифицирующего свой Mergeset как синий и красный, когда ограничение размера антикона = 0.</p>
  <div class="img-container"><img alt="Mergeset и классификация «синий/красный» - GHOSTDAG" src="images/image46.png"></div>

  <h3 class="section-title">Параметр K - GHOSTDAG</h3>
  <p>Параметр K контролирует максимально допустимый размер антиконуса для синих блоков. Этот параметр рассчитывается на основе задержки сети, скорости производства блоков и желаемых гарантий безопасности. В этом примере k = 1 вместо k = 0, как в приведенном выше примере, поэтому каждый синий блок имеет еще 1 синий блок в своем антиконусе.</p>
  <div class="img-container"><img alt="Параметр K - GHOSTDAG" src="images/image61.png"></div>

  <div class="simplified-def">
    <h3 class="section-title">Упрощенные определения</h3>
    <p><b>Отношение прошлого</b> - Все блоки, достижимые путем следования по родительским ссылкам назад от заданного блока.</p>
    <p><b>Отношение будущего</b> - Все блоки, которые могут достичь заданного блока путем следования по родительским ссылкам вперед.</p>
    <p><b>Отношение антиконуса</b> - Блоки, которые не являются ни предками, ни потомками друг друга.</p>
    <p><b>Mergeset</b> - Набор блоков GHOSTDAG, объединенных при создании нового блока.</p>
    <p><b>Классификация синий/красный</b> - Категоризация блоков GHOSTDAG как честных (синих) или потенциально конфликтных (красных).</p>
    <p><b>Параметр безопасности K</b> - Максимально допустимый размер антиконуса GHOSTDAG для поддержания безопасности консенсуса.</p>
  </div>

  <h3 class="section-title">Биткойн и Kaspa</h3>
  <p><b>Биткойн</b> - Использует простую линейную терминологию: «предыдущий блок», «следующий блок», «высота цепи» и «самая длинная цепь». Отношения представляют собой простые связи предок-потомок. Конкурирующие блоки становятся «сиротскими» без промежуточных состояний.</p>
  <div class="img-container"><img alt="Биткойн и терминология" src="images/image54.png"></div>
  <p><b>Kaspa</b> - Использует дополнительную терминологию, включая отношения Прошлое/Будущее/Антиконус DAG, Mergeset GHOSTDAG и классификацию Синий/Красный Mergeset. Kaspa поддерживает несколько параллельных блоков, управляет их отношениями и обеспечивает последовательное упорядочивание.</p>
  <div class="img-container"><img alt="Kaspa и терминология" src="images/image49.png"></div>

  <hr class="chapter-break">

  <h2 class="chapter-title" id="h.1uals18cttyl">Глава 10: Обрезка первого порядка</h2>
  <div class="img-container"><img alt="Иллюстрация обрезки первого порядка" src="images/image41.png"></div>
  <h3 class="section-title" id="h.3i8fyh1jrh8m">Что такое обрезка первого порядка и как Kaspa ее использует?</h3>
  <p>Обрезка первого порядка -- это первый шаг в многофазной оптимизации хранения Kaspa. Она удаляет старые данные транзакций из блоков, сохраняя при этом набор UTXO в точке обрезки для проверки состояния, но, что крайне важно, сохраняет все заголовки блоков для поддержания целостности блокчейна.</p>
  <p>Почему «Первый порядок»? - Эта терминология подчеркивает, что удаление тел блоков -- это только начало. Хотя обрезка первого порядка значительно снижает требования к хранению и уменьшает барьеры для запуска узла (повышая децентрализацию), за ней следуют дополнительные шаги обрезки, которые могут удалить еще больше данных (обрезка второго порядка). Эта статья конкретно фокусируется на удалении тела блока -- основе, которая делает все последующие оптимизации возможными.</p>
  <p>Что это значит? - Эта статья не предполагает предварительных знаний, поэтому мы начнем с традиционных проблем хранения блокчейна, затем объясним, как работает обрезка первого порядка путем поддержания наборов UTXO, что удаляется, а что сохраняется, как набор UTXO точки обрезки обеспечивает проверку, и как это создает основу для масштабируемой модели хранения Kaspa, которая позволяет более широкое участие в сети.</p>

  <h3 class="section-title">Традиционное хранение против обрезки первого порядка</h3>
  <p><b>Традиционное полное хранение</b> - В традиционных реализациях блокчейна узлы хранят полные данные блока, включая все детали транзакций от генезиса до текущего конца. Это означает, что каждый вход, выход, подпись и скрипт транзакции сохраняются навсегда, что приводит к постоянно растущим требованиям к хранению, которые могут стать непомерными для многих пользователей.</p>
  <p><b>Вызов обрезки первого порядка</b> - Задача состоит в том, чтобы удалить старые данные транзакций, сохраняя при этом возможность проверять новые транзакции. Новые транзакции должны ссылаться на предыдущие выходы (UTXO), поэтому система должна сохранять достаточно информации для проверки этих ссылок даже после обрезки старых тел блоков.</p>

  <h3 class="section-title">Набор UTXO как основа</h3>
  <p><b>Определение набора UTXO</b> - Набор UTXO представляет собой все неизрасходованные выходы транзакций в определенный момент в блокчейне. Снимок всех «монет», которые существуют и могут быть потрачены в этот момент, аналогичный инвентаризации всех денег в обращении.</p>
  <p><b>Набор UTXO точки обрезки</b> - Kaspa поддерживает специальный набор UTXO в точке обрезки, который служит базовым состоянием для проверки. Этот набор UTXO обновляется по мере продвижения точки обрезки, гарантируя, что он всегда отражает правильное состояние, доступное для траты, в этой контрольной точке.</p>
  <p><b>Продвижение набора UTXO</b> - Когда точка обрезки продвигается, система применяет различия UTXO из блоков в цепи для обновления набора UTXO точки обрезки. Этот процесс гарантирует, что набор UTXO остается точным по мере обрезки старых данных.</p>

  <h3 class="section-title">Что обрезается при обрезке первого порядка</h3>
  <p><b>Удаление данных тела блока</b> - Обрезка первого порядка удаляет фактические данные транзакций из старых блоков, включая входы, выходы, подписи и скрипты транзакций. Это включает мультисеты UTXO, различия UTXO, данные о принятии и полное хранилище транзакций блока.</p>
  <p><b>Сохранение заголовка</b> - Хотя данные транзакций удаляются, заголовки блоков сохраняются для поддержания структурной целостности блокчейна. Блоки переходят в статус «только заголовок», что указывает на то, что заголовок существует, но тело было обрезано.</p>
  <p><b>Сохранение существенных данных</b> - Система сохраняет критически важные данные, необходимые для проверки консенсуса, включая антиконус точки обрезки, блоки окна DAA и блоки GHOSTDAG. Это гарантирует, что операции консенсуса могут продолжаться даже после обрезки.</p>

  <h3 class="section-title">Как набор UTXO обеспечивает проверку</h3>
  <p><b>Процесс проверки транзакций</b> - Новые транзакции могут быть проверены по набору UTXO точки обрезки плюс все последующие изменения UTXO. Система проверяет, что указанные UTXO существуют и не были потрачены дважды, даже без исходных данных транзакций.</p>
  <p><b>Реконструкция состояния</b> - Набор UTXO в точке обрезки, в сочетании с различиями UTXO из последующих блоков, позволяет реконструировать текущее расходуемое состояние. Это обеспечивает полные возможности проверки без необходимости в полных исторических данных транзакций.</p>
  <p><b>Проверка обязательств</b> - Система может проверять целостность набора UTXO с использованием криптографических обязательств в заголовках блоков. Это гарантирует, что обрезанный набор UTXO соответствует тому, что должны содержать заголовки блокчейна.</p>

  <h3 class="section-title">Архивные узлы против обрезающих узлов</h3>
  <p><b>Поведение архивного узла</b> - Узлы, настроенные как архивные, полностью игнорируют обрезку первого порядка, сохраняя все данные транзакций. Эти узлы служат полным историческим реестром сети, но требуют значительно большего объема хранения.</p>
  <p><b>Эффективность обрезающего узла</b> - Обычные обрезающие узлы используют обрезку первого порядка для поддержания управляемого объема хранения, полностью участвуя в проверке консенсуса. Набор UTXO предоставляет достаточно информации для проверки новых транзакций без необходимости в полных исторических данных.</p>

  <h4 class="subsection-title">Решение проблем, связанных с обрезкой и доказательством генезиса</h4>
  <p>Повторяющаяся проблема заключается в том, что пробелы в истории реестра из-за обрезки могут поставить под угрозу проверяемость цепи с момента ее создания (генезис-блока) и, в частности, доказательство того, что не было предварительного майнинга.</p>
  <p>Это опасение необоснованно. Вот почему:</p>
  <ol>
      <li><strong>Генезис-блок встроен в код:</strong> Сам генезис-блок «зашит» в программное обеспечение узла Kaspa. Этот генезис-блок содержит пустой набор UTXO, что доказывает отсутствие предварительного майнинга. Любой пользователь может проверить это в открытом исходном коде.</li>
      <li><strong>Доказательство генезиса:</strong> Каждый узел поддерживает «доказательство генезиса». Это короткая цепочка данных, которая криптографически доказывает, что текущее состояние реестра действительно развилось из встроенного генезис-блока. Подделка такого доказательства потребовала бы столько же работы, сколько было вложено в создание всего реестра. Другими словами, это доказательство так же сильно, как и владение полной историей.</li>
      <li><strong>Целостность восстановленной истории:</strong> Хотя предпринимаются усилия по восстановлению полной истории для исследовательских и удобных целей, процесс децентрализован. Данные собираются от многих пользователей. Ни один отдельный субъект не контролирует оставшиеся «пробелы», что делает невозможным выборочное «скрытие» части истории.</li>
  </ol>
  <p>Таким образом, механизм обрезки Kaspa разработан таким образом, чтобы сеть оставалась безопасной, защищенной и прозрачной, даже без каких-либо архивных узлов. Проверяемость цепи с момента ее создания гарантируется надежными криптографическими доказательствами, а не необходимостью хранить полную и постоянно утяжеляющуюся историю.</p>
  
  <div class="simplified-def">
    <h3 class="section-title">Упрощенные определения</h3>
    <p><b>Обрезка первого порядка</b> - Удаление старых данных транзакций блока при сохранении набора UTXO для проверки.</p>
    <p><b>Набор UTXO точки обрезки</b> - Снимок всех расходуемых выходов в точке обрезки, используемый в качестве основы для проверки.</p>
    <p><b>Статус «только заголовок»</b> - Блоки, данные транзакций которых были обрезаны, но которые сохраняют свои заголовки.</p>
    <p><b>Продвижение UTXO</b> - Процесс обновления набора UTXO точки обрезки по мере продвижения точки обрезки.</p>
    <p>Обрезка первого порядка обеспечивает эффективность хранения при сохранении возможностей проверки с помощью наборов UTXO.</p>
  </div>

  <h3 class="section-title">Биткойн против Kaspa: Загрузка полного узла</h3>
  <p><b>Биткойн</b> - Полные узлы должны загружать и проверять все данные блока от генезиса для загрузки, что требует полных исторических данных транзакций. Хотя Биткойн поддерживает простую обрезку после первоначальной синхронизации, новым узлам все еще требуется полная история блокчейна для установления начального состояния. Линейная цепная структура делает этот процесс простым, но ресурсоемким.</p>
  <p><b>Kaspa</b> - Полные узлы могут загружаться с использованием доказательств обрезки без загрузки полных исторических данных, благодаря интеграции обрезки первого порядка с протоколом консенсуса. Система проверяет доказательства обрезки и применяет криптографически проверяемые данные («доверенные данные») для установления начального состояния. Эти «доверенные данные» не требуют доверия к какой-либо стороне -- они математически проверяются криптографическими доказательствами, которые гарантируют соответствие данных правилам консенсуса. Процесс проверки криптографически доказывает, что доказательство точки обрезки представляет собой действительное состояние консенсуса, в то время как доверенные данные проходят строгую проверку, чтобы убедиться, что они соответствуют ожидаемому состоянию блокчейна. Это позволяет новым узлам эффективно синхронизироваться, сохраняя при этом полные возможности проверки без доверия к внешней стороне.</p>

  <hr class="chapter-break">

  <h2 class="chapter-title" id="h.juf0jn9hl1ev">Глава 11: Архивные узлы против полных узлов</h2>
  <div class="img-container"><img alt="Архивные узлы против полных узлов" src="images/image76.png"></div>
  <h3 class="section-title" id="h.knim47a94vo6">Архивные узлы Kaspa против обрезающих узлов</h3>
  <p><b>Обрезающие узлы -- это полные узлы</b> - Обрезающие узлы, использующие обрезку первого и второго порядка, по-прежнему считаются полными узлами, поскольку они сохраняют полные возможности проверки. Они могут проверять все новые блоки, участвовать в консенсусе и обслуживать сеть, не требуя доверия к внешним сторонам. Система доказательства точки обрезки гарантирует, что даже с обрезанными данными эти узлы поддерживают криптографическую проверку полного состояния блокчейна.</p>
  <p><b>Архивные узлы являются необязательными</b> - Архивные узлы, которые сохраняют все исторические данные, не являются необходимыми для бессрочной работы сети Kaspa. Сеть может полностью работать с обрезающими узлами, поскольку доказательства точек обрезки предоставляют математически проверяемые гарантии относительно обрезанного состояния. Это отличается от Биткойна, где сеть требует архивных узлов (которые хранят полную историю транзакций с момента создания) для загрузки нового узла.</p>
  <p><b>Отсутствие дополнительных требований к доверию</b> - Система обрезки поддерживает модель Биткойна без доверия, используя криптографические доказательства, а не доверенные стороны. Новые узлы могут загружаться из доказательств обрезки и проверять полное состояние блокчейна без загрузки всех исторических данных, сохраняя при этом те же гарантии безопасности, что и узлы, которые хранят все с момента создания.</p>
  <p><b>Устойчивость сети</b> - Этот дизайн гарантирует, что сеть Kaspa может устойчиво масштабироваться, не требуя постоянно растущего объема хранения от участников. Обрезающие узлы обеспечивают ту же консенсусную безопасность, что и архивные узлы, при этом позволяя более широкое участие в сети за счет снижения требований к оборудованию.</p>
  <p><b>Поведение архивного узла</b> - Узлы, настроенные как архивные, полностью игнорируют обрезку первого и второго порядка, сохраняя все данные консенсуса (и исторические данные приложений). Эти узлы служат полным консенсусным реестром сети, но требуют максимального объема хранения и являются чисто необязательными для работы сети.</p>
  <p><b>Эффективность обрезающего узла</b> - Обычные обрезающие узлы (полные узлы) используют обрезку для достижения максимальной эффективности хранения при сохранении полных возможностей проверки консенсуса через многоуровневую систему доказательств. Эти узлы неотличимы от архивных узлов с точки зрения безопасности и возможностей проверки.</p>

  <hr class="chapter-break">

  <h2 class="chapter-title" id="h.xoj5wjv6tg4b">Глава 12: Kaspa: Эволюция энергоэффективной децентрализованной архитектуры</h2>
  <h3 class="section-title" id="h.pfav0qmvzt92">Введение: Физика денег и эффективность</h3>
  <p>В мире децентрализованных сетей эффективность -- это не просто роскошь, это черта выживания. Криптовалюты функционируют как денежные энергетические системы, где реальная энергия преобразуется в безопасные, неизменяемые записи стоимости. Подобно тому, как физические системы стремятся минимизировать потери энергии и энтропию, хорошо спроектированная криптосеть должна минимизировать потери и трение. Биткойн был пионером в этой концепции, связав денежную стоимость с затратами энергии на доказательство работы, создав форму «цифрового золота», обеспеченного термодинамическими затратами. Но архитектура Биткойна, хотя и революционная, имеет структурные неэффективности, которые ограничивают ее пропускную способность и расходуют часть энергии, которую майнеры вкладывают в нее.</p>
  <p>Войдите в Kaspa -- сеть с доказательством работы нового поколения, которая переопределяет архитектуру децентрализованного консенсуса. Kaspa построена на BlockDAG (ориентированном ациклическом графе), а не на одной цепочке, что позволяет создавать и обрабатывать несколько блоков параллельно. Этот дизайн направлен на минимизацию системной энтропии и неэффективности, что делает Kaspa своего рода «эффективным двигателем» для хранения и перемещения экономической ценности.</p>
  
  <h3 class="section-title">Энтропия, энергия и денежные системы</h3>
  <p>Чтобы понять значение Kaspa, мы должны сначала понять, как энергия и энтропия связаны с денежными системами. В физике создание порядка (низкой энтропии) в одном месте требует расхода энергии и увеличения энтропии в другом -- принцип, который также применим к деньгам. Твердые деньги, такие как золото, исторически получали свою ценность от огромной энергии и труда, необходимых для их получения. Биткойн применил тот же принцип в цифровом виде, требуя от майнеров выполнения дорогостоящих вычислений (хеширования) для добавления блоков, тем самым гарантируя, что каждая монета и блок несут доказательство затраченной энергии. Однако, если значительная часть работы тратится впустую или если конструкция системы вызывает ненужное трение, то «денежный двигатель» теряет энергию в виде тепла.</p>

  <h3 class="section-title">Трение в экономических системах</h3>
  <p>В экономике трение относится ко всему, что вызывает потери или неэффективность в движении стоимости. Биткойн ввел некоторое трение по необходимости: его конструкция обменивает скорость на безопасность. Транзакции ожидают в среднем около 10 минут нового блока, и принято ждать 6 подтверждений (около 1 часа) для высокой гарантии от отмены. Эта задержка и низкая пропускная способность создают экономическое трение. Кроме того, процесс майнинга Биткойна иногда приводит к напрасной работе в виде сиротских блоков (когда два майнера находят действительный блок почти одновременно, только один блок становится частью основной цепи, а другой отбрасывается). Эти сиротские блоки представляют собой реальную энергию, затраченную майнерами, которая не способствует устойчивому ведению реестра.</p>

  <h3 class="section-title">Узкое место Биткойна в виде одной цепи</h3>
  <p>Блокчейн Биткойна можно представить как однополосную дорогу для транзакций. За один раз может быть принят только один блок, и каждый блок должен выстраиваться последовательно. Если два блока приходят одновременно, один будет вынужден уступить и фактически будет отброшен как сиротский. Этот дизайн был выбран намеренно, чтобы поддерживать порядок в системе, но за счет серьезных ограничений производительности. Ограничения этой одноцепочечной архитектуры хорошо известны: отсутствие масштабируемости, подверженность атакам эгоистичного майнинга при сокращении времени блока и потерянные блоки являются неотъемлемой проблемой. Важно отметить, что консенсус Биткойна тратит небольшую, но не пренебрежижимую часть майнинговой работы на блоки, которые никогда не становятся частью реестра. Эти сиротские блоки -- это энтропия системы -- энергия, которая увеличила беспорядок и рассеялась в виде тепла, а не была сохранена как полезная информация. В результате огромная майнинговая энергия Биткойна производит лишь ничтожную пропускную способность.</p>

  <h3 class="section-title" id="h.y2juit6511i3">BlockDAG Kaspa: Параллелизм без лишней работы</h3>
  <p>Kaspa подошла к проблеме, задавшись вопросом: что, если бы блокам не нужно было выстраиваться в один ряд? Вместо однополосной дороги Kaspa использует многополосную магистраль для блоков, где многие блоки могут быть созданы параллельно и при этом объединяться в единый реестр. Фундаментальным нововведением является архитектура BlockDAG (ориентированного ациклического графа) Kaspa в сочетании с протоколом консенсуса GHOSTDAG. В BlockDAG блоки не указывают на один предыдущий блок (вершину «самой длинной цепи»), как в Биткойне; вместо этого каждый блок может ссылаться на нескольких предшественников, включая различные «вершины» графа. Блоки, которые считались бы конкурирующими или сиротскими в Биткойне, не отбрасываются в Kaspa -- они включаются в граф реестра. Структура DAG позволяет этим одновременным блокам сосуществовать и в конечном итоге быть последовательно упорядоченым алгоритмом GhostDAG. Все действительные блоки вносят вклад в историю реестра; доказательство работы ни одного майнера не тратится впустую.</p>
  <p>Влияние этого дизайна на эффективность впечатляет. Во-первых, никакая мощность майнинга не тратится на сиротские блоки. Во-вторых, параллелизм Kaspa значительно увеличивает пропускную способность. Kaspa работает с базовой скоростью 1 блок в секунду в своей основной сети (и недавно была обновлена до 10 блоков в секунду) по сравнению с 0,1 блоками в секунду для Биткойна. Это 10-кратное увеличение частоты блоков по замыслу, с планами на еще большее. Кроме того, поскольку каждый блок Kaspa меньше (чтобы поддерживать низкие требования к узлам), но они приходят гораздо чаще, транзакции распределяются по многим блокам. Конечным результатом является потенциальная пропускная способность в тысячи транзакций в секунду. Фактически, алгоритм GhostDAG продемонстрировал, что он может поддерживать примерно 3000 транзакций в секунду при 10 блоках/сек в тестовых сетях с использованием обычного оборудования. Это было достигнуто при сохранении скромных требований к оборудованию. Другими словами, архитектура Kaspa не заставляет идти на компромисс между масштабируемостью и децентрализацией -- она обрабатывает гораздо больше транзакций, не увеличивая барьер входа для узлов. Каждый участник по-прежнему может проверять цепь на обычных компьютерах, что крайне важно для децентрализации. В отличие от многих высокопроизводительных систем, которые полагаются на мощные узлы центров обработки данных или компрометируют консенсус, Kaspa остается чистой системой Proof-of-Work с широким распределением майнинговых и полных узлов.</p>
  <p>Как Kaspa поддерживает уникальную и согласованную историю (единый источник истины), если блоки приходят параллельно? Ответ -- GhostDAG, алгоритм консенсуса, который упорядочивает блоки в DAG, учитывая не только «самую длинную цепь» (как в Биткойне), но и «самый тяжелый подграф» блоков. GhostDAG присваивает каждому блоку своего рода оценку или порядок на основе объема проверенной истории, предшествующей ему, и того, как он ссылается на другие блоки. Он находит шаблон, называемый k-кластером -- по сути, набор взаимно осведомленных блоков -- и использует его для определения того, какие блоки являются частью основной упорядоченной структуры (окрашены «синим»), а какие находятся за пределами основной структуры («красные»), но все еще включены. Алгоритм жадный, но доказуемо сходится к уникальной истории, аналогичной консенсусу Накамото, за исключением того, что он может это делать даже тогда, когда многие блоки находятся в процессе. Формальная гарантия заключается в том, что по мере накопления блоков вероятность изменения порядка данного блока (т.е. отмены форка) экспоненциально уменьшается, как и в случае с подтверждениями Биткойна -- но эта безопасность достигается при гораздо более высоких скоростях блоков. На практике транзакции Kaspa глубоко зарываются под многими блоками гораздо быстрее, чем в Биткойне, что делает их очень безопасными от реорганизаций за считанные секунды. Команда Kaspa отмечает, что упорядочивание GhostDAG «становится экспоненциально труднее отменить с течением времени», даже при высоких скоростях создания блоков. Финальность быстрая; сеть достигает того, что можно назвать термодинамической необратимостью транзакций в человеческом масштабе.</p>
  <p>Учитывая, что все блоки сохраняются, у майнеров Kaspa нет стимула скрывать или стратегически эгоистично майнить, чтобы сиротить блоки других -- поведение, которое может быть рациональным в более быстрых блокчейн-контекстах. Стратегия Kaspa максимального раскрытия информации (каждый блок ссылается на все известные ему вершины) означает, что сеть быстро информируется обо всех параллельных блоках. Это наводняет граф знаниями, уменьшая неопределенность. В терминах теории информации Kaspa минимизирует энтропию состояния сети, гарантируя, что невидимые форки не сохраняются долго; все интегрировано. «Принцип максимального раскрытия» по существу направлен на уменьшение энтропии системы (неопределенности) путем максимально эффективного обмена данными. Это снова согласуется с физическими принципами: для поддержания порядка необходимо максимально эффективно распространять информацию (или энергетические сигналы) по системе.</p>
  <p>Важно отметить, что Kaspa достигает этого без ущерба для безопасности или децентрализации. Она по-прежнему использует Proof-of-Work, что означает, что действительность каждого блока гарантируется реальными затратами энергии. А поскольку блоки меньше и чаще, пропускная способность и хранилище узлов были тщательно управляемы (с использованием таких методов, как обрезка и эффективное управление UTXO), так что даже домашний компьютер может справляться. Результатом является сеть, которая предлагает «безопасность и децентрализацию уровня Proof-of-Work с производительностью, сравнимой с ведущими сетями Proof-of-Stake». В отличие от многих высокопроизводительных систем, которые полагаются на мощные узлы центров обработки данных или компрометируют консенсус, Kaspa остается чистой системой Proof-of-Work с широким распределением майнинговых и полных узлов.</p>
  <p>Проще говоря, протокол GhostDAG от Kaspa устраняет структурное узкое место, которое Биткойн считал неизбежным. Старая «трилемма безопасности, скорости и децентрализации», по мнению Kaspa, полностью решена на практике. Отказавшись от линейной цепной модели, Kaspa открывает шлюзы для пропускной способности, не жертвуя безопасностью Накамото -- подвиг, который многие исследователи считали невозможным в течение многих лет. Все это приводит к системе, в которой блоки приходят непрерывно, как капли в хорошо синхронизированном фонтане, а не пунктуальные, прерывистые блоки часов Биткойна. Транзакции на Kaspa подтверждаются за секунды и финализируются (с незначительной вероятностью реорганизации) обычно за несколько десятков секунд. Фактически, целью проектирования Kaspa было время подтверждения, ограниченное только задержкой сети -- так быстро, как информация может физически перемещаться по Интернету. Сеть уже обеспечивает полностью подтвержденные транзакции в среднем за 10 секунд, и это число уменьшается по мере увеличения скорости блоков. С точки зрения пользователя, это означает, что отправка ценности через Kaspa ощущается почти как оплата кредитной картой или перевод наличных -- расчет происходит почти мгновенно, но с дополнительным преимуществом, что это необратимо и не требует доверия.</p>

  <h3 class="section-title" id="h.ttddfh4xlbpu">Достижение пропускной способности со скоростью света</h3>
  <p>Один из способов оценить соответствие Kaspa физическим принципам -- это рассмотреть ее работу с задержкой, то есть задержкой от одной стороны света до другой. Глобальное время кругового обхода Интернета (RTT) -- по сути, время, необходимое сигналу для прохождения до антиподов и обратно -- составляет порядка 200 миллисекунд (0,2 секунды) в лучшем случае (ограничено скоростью света в оптоволокне и сетевыми переходами). Традиционные блокчейны, такие как Биткойн, работают на порядки медленнее этого предела (600 секунд на блок), поэтому задержка сети не является основным фактором в их проектировании; они живут в комфортном, медленном режиме равновесия. Но Kaspa смело шагнула в режим, где время блока составляет порядка задержки сети -- в настоящее время 100 миллисекунд на блок в новом обновлении (10 BPS), что на самом деле быстрее, чем одностороннее распространение на другой конец Земли. Это критический порог. Переход от времени блока в 1 секунду к времени блока в 0,1 секунды -- это не просто 10-кратное количественное улучшение; это качественный скачок, который потребовал переосмысления консенсуса.</p>
  <p>Почему? Если вы попытаетесь запустить одноцепочечный (линейный) консенсус с блоками по 100 мс в глобальной сети, вы получите полный хаос -- едва один узел услышал о блоке, как уже найдено пять других. Задержка распространения будет означать, что сеть никогда не синхронизируется; форки будут множиться, и консенсус либо разрушится, либо централизуется (всегда будут выигрывать только самые быстрые соединения). Kaspa -- это первая система Proof-of-Work, которая продемонстрировала консенсус в этом суб-RTT режиме, и она может это сделать именно потому, что ее многолидерный GhostDAG может элегантно обрабатывать множество одновременных блоков. Как отметил ведущий разработчик Майкл Саттон во время обновления Crescendo Kaspa (которое перевело основную сеть с 1 BPS на 10 BPS): «Увеличение скорости блоков до 10 в секунду, достигнутое за счет сокращения времени блока до 100 мс (< 200 мс ≈ глобальный RTT), может быть обеспечено только с помощью протокола консенсуса, который изначально допускает параллелизм… Таким образом, пересечение порога RTT является качественным, а не только количественным скачком». Другими словами, дизайн Kaspa фундаментально соответствует физическим пределам передачи информации -- он структурирован для работы на максимальной скорости, которую позволяют законы физики (скорость света, пропускная способность сети), в то время как линейная цепь не может безопасно пересечь этот предел без ущерба для безопасности или без предположения о меньшем радиусе сети.</p>
  <p>Стоит подчеркнуть, насколько это замечательно в контексте распределенных систем. Kaspa достигает глобального, асинхронного консенсуса с временем блока, меньшим, чем глобальные задержки связи. И она делает это без уменьшения сети или необходимости специальной настройки доверия. Сеть остается обширной и без разрешений -- узлы могут находиться в любой точке мира, подключенные стандартными интернет-соединениями -- и все же Kaspa производит и подтверждает блоки быстрее, чем любая отдельная цепь могла бы себе представить в этих условиях. Протокол GhostDAG по существу позволяет то, что классическая теория консенсуса считала бы невозможным при строгом правиле самой длинной цепи: поддерживать согласие всех, несмотря на постоянные мини-форки (параллельные блоки). Идея состоит в том, что, позволяя этим форкам существовать, а затем вероятностно упорядочивая их, вы принимаете хаос и организуете его, вместо того чтобы пытаться полностью предотвратить его. Результатом является максимальная пропускная способность.</p>
  <p>После активации хардфорка Crescendo разработчики Kaspa отметили, что система была разработана таким образом, что даже при 10 BPS для запуска узла не требовался суперкомпьютер. Реализация на Rust и оптимизации протокола гарантируют, что обычный ПК с домашним интернет-соединением может справляться с 10 блоками в секунду и тысячами транзакций в секунду. Это демонстрирует этику проектирования, ориентированную на эффективность на всех уровнях -- не только на чистую пропускную способность, но и на эффективное использование вычислительных ресурсов и пропускной способности. Например, блоки остаются компактными, а структура DAG обрезается и управляется таким образом, чтобы не стать громоздкой. Kaspa даже включает новые методы (такие как предстоящий DAGKnight и стратегии обрезки) для адаптации к условиям сети и ограничения размера состояния. Все эти выборы отражают почти физический минимализм: устранение потерь, будь то потерянная хеш-мощность, потерянное время или потерянное хранилище. Если майнинг Биткойна иногда критикуют за производство большого количества тепла (потерянная энергия на транзакцию), Kaspa значительно снижает энергию на транзакцию, увеличивая пропускную способность и используя более энергоэффективный алгоритм хеширования (kHeavyHash). Команда Kaspa явно разработала kHeavyHash так, чтобы он был совместим с оптическим майнингом и майнингом с низкими ресурсами, что потенциально означает, что он может работать на специализированном оборудовании, которое потребляет гораздо меньше электроэнергии. В сочетании с политикой DAG «без потерянных блоков» это делает Kaspa менее энергоемкой, чем другие PoW-сети, на транзакцию или на переданную стоимость. Проще говоря, Kaspa может сделать больше с каждым джоулем энергии, который майнеры вкладывают в нее -- свидетельство ее превосходной инженерии. Даже независимые наблюдатели отмечают эту эффективность: «Алгоритм KHeavyHash разработан для оптимизации энергопотребления, что делает [Kaspa] менее ресурсоемкой по сравнению с… Биткойном». Мы можем рассматривать это как улучшение термодинамической эффективности системы: большая часть входной энергии преобразуется в безопасные, финализированные транзакции (полезную работу), а не в потерянное хеширование или время ожидания.</p>
  <p>Ответственно раздвигая физические границы, Kaspa позиционирует себя как высокоэффективная с термодинамической точки зрения денежная сеть. Она согласовывает темп производства блоков с максимально быстрой связью, устраняет избыточную работу и гарантирует, что каждый бит работы способствует упорядочиванию транзакций. По аналогии, если Биткойн подобен старому тепловому двигателю, который производит много отработанного тепла и работает на низкой скорости, то Kaspa подобна современной турбине, работающей вблизи своего теоретического предела эффективности -- извлекая максимально полезное движение (пропускную способность транзакций) из каждой единицы топлива (энергии хеширования). Законы физики устанавливают строгий потолок, и Kaspa полна решимости достичь этого потолка. Это соответствие «направленным потокам» технологической эволюции (больше выхода при меньшем входе) предполагает, что Kaspa следует эволюционной траектории, которую мы наблюдали во многих других системах -- от одноядерных до многоядерных процессоров и параллельной обработки, от коммутируемого доступа к широкополосному интернету, от конных экипажей до многополосных автомагистралей. Системы, использующие параллелизм и уменьшающие внутреннее сопротивление, неизбежно превосходят те, которые остаются застрявшими в одном последовательном процессе.</p>

  <h3 class="section-title" id="h.uttpgy92hgk">Меньше трения, лучше сохранение стоимости</h3>
  <p>Технические достоинства дизайна Kaspa имеют глубокие экономические последствия. Когда мы уменьшаем энтропию и трение в денежной системе, мы создаем более благоприятную среду для сохранения и циркуляции стоимости. Рассмотрим экономику как живую экосистему или, возможно, электрическую сеть: если энергия (или деньги) может свободно течь туда, где она нужна, с минимальными потерями, система процветает и растет. Сеть Kaspa с низкой задержкой и высокой пропускной способностью означает, что стоимость может быть обменена быстро и дешево любым человеком, в любом месте, без оттока через посредников или высоких затрат на ожидание. Это свойство естественным образом привлекает использование -- пользователи предпочтут систему, где их платежи подтверждаются за секунду, той, где они ждут час, особенно когда безопасность сопоставима. По мере увеличения использования ликвидность и капитал притягиваются к сети, увеличивая ее полезность в петле обратной связи. Экономика 101 говорит нам, что, имея два варианта, люди выберут тот, у которого самые низкие транзакционные издержки (при прочих равных), и деньги будут течь по каналу, который предлагает наименьшее сопротивление торговле. Kaspa представляет себя как этот канал с низкой импедансом: «минимальная рассеиваемая работа, минимальная транзакционная импеданс, максимальная денежная ясность», как описал один наблюдатель точку схождения, куда будет течь капитал. С Kaspa традиционные барьеры -- задержки подтверждения, ограничения пропускной способности, высокие комиссии во время перегрузки -- значительно минимизированы, поэтому «труба» для денежной энергии широка и гладка.</p>
  <p>План К, в интервью об экономике Kaspa, использовал биологическую аналогию, чтобы описать, как эффективные деньги направляют энергию: хорошие деньги подобны сосудистой системе растения, которая направляет питательные вещества (энергию) к фотосинтезирующим листьям (продуктивной работе), вместо того чтобы позволять ресурсам поглощаться паразитами или неактивными частями. В этой аналогии Kaspa можно рассматривать как форму денег с низкой энтропией, которая способствует эффективному потоку энергии. Ее скорость и емкость гарантируют, что экономическая энергия (стоимость) движется к продуктивным целям (фактическим передачам товаров и услуг) вместо того, чтобы тратиться на задержки или арбитраж между уровнями. Между тем, ее основа доказательства работы предотвращает отвлечение энергии, которое происходит с «легкими деньгами». Фиатные валюты, например, сравнивались с паразитической лозой в аналогии Плана К -- они могут быть инфлированы или скопированы центральными властями, эффективно высасывая энергию из продуктивной экономики путем размывания стоимости. Kaspa, как и Биткойн, защищает себя от такого размывания, требуя реальной работы для создания новых монет и строго ограничивая рост предложения. Как отметил План К: «Золото, Биткойн и Kaspa похожи на [гормоны], которые нельзя скопировать, предотвращая любое отвлечение энергии». Проще говоря, эти твердые деньги фиксируют энергию, которая была использована для их производства; они предлагают безопасный резервуар для экономической стоимости без утечки из-за обесценивания.</p>
  <p>Kaspa распространяет этот принцип твердых денег на сферу повседневного использования. Биткойн доказал, что децентрализованная сеть может безопасно хранить ценность (низкая энтропия со временем), но Kaspa также стремится эффективно перемещать ценность (низкая энтропия в транзакциях). Сочетая неподдельные затраты Биткойна с безфрикционным транзакционным уровнем, Kaspa позиционирует себя как комплексное решение для денег: хранилище ценности, средство обмена и единица учета -- все в одном, без обычных компромиссов. Поучительно вспомнить, почему исторически золото нуждалось в заменителе (например, бумажных деньгах или фиатной валюте) для повседневных транзакций -- потому что золото было тяжелым и медленным в перемещении, что создавало трение. Биткойн, будучи медленным и с ограниченной пропускной способностью, аналогичным образом пригласил сети второго уровня или конкурирующие монеты, чтобы заполнить пробел для быстрых платежей, по сути, уступив роль средства обмена «более мягким» валютам. Kaspa, с другой стороны, достаточно быстра и масштабируема, чтобы не требовать вторичной денежной сети для обработки объема. Она может быть как высокоинтегрированным расчетным уровнем, так и высокоскоростным транзакционным уровнем. Это предполагает будущее, в котором экономическая активность не будет постоянно переключаться между «сетью хранения ценности» и «платежной сетью» (со всеми связанными с этим трениями обмена и компромиссами в безопасности) -- вместо этого одна сеть сможет эффективно выполнять все это. Действительно, сторонники утверждают, что, поскольку Kaspa решила трилемму, «больше нет пробела на денежном рынке, который Kaspa не заполняет», устраняя необходимость в более медленных базовых хранилищах, таких как Биткойн, или более быстрых, но более слабых альтернативах. Останется ли Биткойн высокоценным расчетным уровнем, а Kaspa больше для обмена, или Kaspa в конечном итоге возьмет на себя обе роли, решит рынок. Но одно ясно: системы, которые меньше тратят и больше дают, в долгосрочной перспективе выиграют у тех, кто этого не делает. Это естественный отбор, примененный к денежным системам.</p>
  <p>Меньшее трение также означает, что майнеры и пользователи лучше согласованы в экосистеме Kaspa. В Биткойне пользователи иногда жалуются на высокие комиссии во время перегрузки (которые в конечном итоге достаются майнерам), а майнеры сталкиваются с вариациями и потерями из-за сиротских блоков. В Kaspa высокая пропускная способность поддерживает низкие комиссии (поскольку пропускная способность велика), а дизайн без сиротских блоков означает, что майнеры не теряют вознаграждения из-за задержки сети. Майнеры по-прежнему получают свою справедливую награду -- фактически, награда за блок Kaspa распределяется на гораздо большее количество блоков в единицу времени, что, парадоксально, делает процесс майнинга более гранулированным и справедливым (несколько майнеров в секунду могут получать награды, а не один победитель каждые 10 минут). Это может уменьшить вариативность майнинга и централизующие давления (поскольку в Биткойне майнинговый пул, который находит блок немного быстрее, выигрывает 100% награды за 10 минут, тогда как в Kaspa многие майнеры получают меньшую награду каждую секунду -- система «многолидерства», где преимущество усредняется). Больше майнеров могут включать блоки почти одновременно, что может уменьшить монополистическую тенденцию одного майнера доминировать в данном временном интервале. «Увеличение конкуренции в каждом раунде задержки» даже имеет последствия для снижения MEV (максимально извлекаемой стоимости майнера) и манипуляций -- потому что, когда блоки параллельны, одному участнику гораздо сложнее контролировать порядок транзакций. Действительно, параллелизм Kaspa добавляет немного хаоса, который способствует справедливости: становится невозможным применять определенные эксплойты, требующие строгого контроля над порядком, тем самым уменьшая энтропию рыночных результатов (рыночные цены и транзакции отражают истинное предложение и спрос, а не вмешательство майнера). Это еще один пример того, как подход Kaspa стремится сохранить ценность внутри системы -- делая поведение системы термодинамически необратимым, в том смысле, что ни один участник не может легко отменить или переупорядочить транзакции для своей выгоды, изменения состояния сети (выполненные транзакции) являются подлинными и долговечными. Он согласует экономические потоки с почти физической неизбежностью: как только что-то происходит в Kaspa, это по существу сделано и не может быть легко отменено или обмануто.</p>
  <p>С макроэкономической точки зрения, если рассматривать глобальную конкуренцию валют и сетей как эволюционный ландшафт, то система, подобная Kaspa, которая предлагает низкое сопротивление и высокую целостность, будет стремиться накапливать «денежную массу». Со временем ликвидность порождает ликвидность -- пользователи идут туда, где находятся другие пользователи и продавцы. Если Kaspa продолжит предлагать безопасность, подобную Биткойну, с значительно лучшей производительностью, разумно полагать, что большая часть экономической активности перейдет на Kaspa. Мы уже видели исторически, что фиатные валюты заменили золото для транзакций из-за их меньшего трения, хотя золото является превосходным средством накопления стоимости; и теперь криптовалюты бросают вызов фиатным валютам, сочетая твердость с цифровой скоростью. Kaspa может рассматриваться как следующий шаг: сочетание абсолютной твердости денег PoW с абсолютной скоростью современных сетей. На языке физики Kaspa может быть «гравитационной конечной точкой» для денежной энергии -- массивным аттрактором, который притягивает капитал, потому что он представляет собой состояние минимальной потенциальной энергии (то есть вы не можете легко найти систему, где ваши деньги были бы безопаснее и проще в использовании одновременно). Когда нет более простого пути (состояния с меньшей энергией) для потока стоимости, вы достигли равновесия, и Kaspa стремится быть этой точкой равновесия для децентрализованных денег.</p>

  <h3 class="section-title">Необратимость и стрела времени в Kaspa против Биткойна</h3>
  <p>Поразительный аспект систем Proof-of-Work заключается в том, как они устанавливают стрелу времени. Каждый блок -- это необратимое событие; как только работа выполнена и блок принят, его отмена потребует затрат эквивалентного (или большего) количества энергии. Эта однонаправленная функция работы придает блокчейнам временное направление: подобно энтропии в физике, легко идти вперед (майнить новые блоки, увеличивать энтропию), но чрезвычайно трудно идти назад (отменять блоки, уменьшать энтропию) без внешнего вмешательства. Блокчейн Биткойна, защищенный энергией, часто сравнивают со стрелой времени -- последовательностью все более «установленной» истории. Kaspa наследует это свойство, но ускоряет его. Поскольку блоки приходят так быстро, а GhostDAG быстро углубляет историю реестра, необратимость транзакций в Kaspa нарастает быстрее, чем в Биткойне. Вероятность отмены транзакции в Kaspa экспоненциально уменьшается с каждой секундой, поскольку несколько новых блоков цементируют порядок. В Биткойне для высокой уверенности обычно ссылаются на шесть блоков (около часа); в Kaspa аналогичный уровень безопасности может быть достигнут, возможно, за дюжину блоков, что при 1 блоке/сек составляло около 12 секунд (а при 10 блоках/сек -- чуть больше секунды, хотя в игру вступают и другие факторы задержки).</p>
  <p>Это означает, что окончательность реестра Kaspa приближается к чему-то очень близкому к необратимости в реальном времени. Поведение системы отражает необратимый термодинамический процесс, который очень быстро достигает точки невозврата. Например, если две конфликтующие транзакции (попытки двойной траты) выпущены, быстрое включение и упорядочивание блоков Kaspa определит победителя и наберет подтверждения на нем в течение нескольких секунд, делая попытку проигравшего отменить транзакцию все более тщетной. В Биткойне этот период неопределенности (энтропии) может длиться много минут, и даже тогда он может быть использован злоумышленником с достаточной хеш-мощностью в состоянии низкой энтропии (до накопления многих подтверждений). Kaspa сокращает это окно, делая стоимость отмены истории чрезвычайно высокой почти немедленно. Мы можем рассматривать это как Kaspa, увеличивающую термодинамический градиент, который должен преодолеть злоумышленник -- более крутой холм, который становится круче быстрее. Это снова связано с эффективностью: сеть не тратит время на преобразование хеш-мощности в безопасность (порядок), поэтому у злоумышленника нет «роскоши» долгого окна уязвимости для использования. Энтропия неопределенности быстро вытесняется из системы, оставляя очень упорядоченное состояние (подтвержденные транзакции), которое является стабильным.</p>
  <p>Другой аспект -- это принцип Ландауэра, концепция в физике, которая утверждает, что стирание одного бита информации имеет неустранимые энергетические затраты (рассеивание тепла). В блокчейнах «стирание» транзакции (посредством реорганизации, которая удаляет подтвержденную транзакцию из истории) чрезвычайно энергозатратно -- вот почему крупные реорганизации невозможны, если честные майнеры контролируют большую часть хеш-мощности. Kaspa гарантирует, что биты данных транзакций включаются во многие блоки (информационные биты) почти немедленно, так что информация укореняется и становится термодинамически дорогой для стирания. По сути, Kaspa согласует теорию информации с термодинамикой: информация (состояние реестра) быстро приобретает устойчивую к энтропии постоянность, закрепленную доказательством работы. И поскольку Kaspa использует свою входную энергию более эффективно (нет потерянных блоков, больше подтверждений на единицу времени), она, возможно, достигает большей «необратимости на единицу энергии», чем Биткойн. Каждый джоуль майнинга в Kaspa способствует окончательности многих транзакций, в то время как в Биткойне каждый джоуль обеспечивает меньше транзакций (а некоторые джоули тратятся на блоки, которые могут даже не учитываться).</p>
  <p>Метафора стрелы времени уместна: стрела Биткойна движется медленно, но неумолимо вперед, требуя больше времени для прочного закрепления истории, в то время как стрела Kaspa летит на высокой скорости, быстро фиксируя события во времени. Обе стрелы указывают в одном направлении -- навязанном вторым законом термодинамики (потреблением энергии) -- но стрела Kaspa покрывает большее расстояние (глубину реестра) за единицу времени. Это не только имеет практические преимущества (пользовательский опыт, пропускная способность), но и философски указывает на то, что дизайн Kaspa находится в гармонии с «естественным» направлением сложных систем: к большему порядку, достигаемому за меньшее время путем расходования энергии. Если Биткойн показал, что энергия + время = безопасность, Kaspa показывает, что с лучшим дизайном вы можете достичь эквивалентной безопасности с той же энергией за гораздо меньшее время, просто устраняя внутренние неэффективности. Она не нарушает никаких фундаментальных законов; она просто не упускает возможности, которые Биткойн оставляет без внимания.</p>

  <h3 class="section-title">Заключение: Kaspa как эффективная граница денежных сетей</h3>
  <p>Рассматривая Kaspa через двойные линзы физики и экономики, мы видим, как проявляется тема: системы развиваются к оптимальной эффективности в обработке энергии и информации. В экономике деньги эволюционировали от громоздких товаров к золоту, к бумажным деньгам, обеспеченным золотом, к цифровым сетям -- каждый шаг направлен на уменьшение трения при сохранении доверия и стоимости. В вычислительной технике и сетях мы перешли от последовательной к параллельной обработке, от аналоговых задержек к сигналам, близким к скорости света. Kaspa представляет собой слияние этих эволюционных путей в области децентрализованных денег. Она берет твердость и окончательность доказательства работы, обеспеченного энергией -- аспект, который делает Биткойн формой «цифрового золота» -- и значительно повышает эффективность системы, использующей эту энергию. Результатом является сеть, которую можно описать как двигатель ценности: она преобразует электрическую энергию (хеширование) в цифровую экономическую ценность (безопасные транзакции и выпуск монет) с минимальными потерями, направляя эту ценность быстро туда, где она нужна.</p>
  <p>При позиционировании Kaspa по отношению к Биткойну речь идет не о соперничестве, а о прогрессе в децентрализованной архитектуре. Биткойн был прототипом, доказавшим работоспособность термодинамического подхода к деньгам. Kaspa -- это эволюция, которая совершенствует архитектуру, чтобы минимизировать потери (энтропию) и максимизировать пропускную способность (полезную работу), не теряя при этом сути того, что сделало Биткойн великим (децентрализация и безопасность через доказательство работы). Мы сравнивали Kaspa с Биткойном только потому, что оба они разделяют фундаментальную основу PoW и разумную денежно-кредитную политику, отличаясь в основном структурным дизайном. И это различие -- BlockDAG против блокчейна -- сыграло решающую роль. BlockDAG Kaspa -- это естественное решение проблем Биткойна, почти очевидное задним числом: если одна полоса слишком медленная, добавьте больше полос; если отбрасывание блоков тратит энергию, найдите способ сохранить их все; если ожидание глобальной синхронизации вызывает задержку, разрешите некоторую асинхронность, а затем решите ее алгоритмически. Это, в некотором смысле, здравые оптимизации, как только технология позволила их реализовать. Гениальность GhostDAG заключалась в том, чтобы найти способ заставить многих лидеров (майнеров) работать вместе одновременно без хаоса -- как хорошо оркестрованная симфония, а не сольное выступление. Это показывает, что порядок может возникать из кажущегося хаоса при правильных правилах, что перекликается с тем, как физические системы самоорганизуются при разумном применении ограничений.</p>
  <p>Конечным результатом выбора дизайна Kaspa является система, которая, по мнению некоторых, представляет собой естественное завершение эффективного вычисления стоимости. Она быстра, насколько позволяет физика, безопасна, насколько может быть доказательство работы, и децентрализована, насколько должна быть глобально инклюзивная сеть. Могли бы мы быть быстрее или эффективнее, не нарушая фундаментальную связь между деньгами и термодинамикой? Вероятно, не намного -- не без новой физики или компромисса с доверием. Kaspa уже стремится к 100 блокам в секунду в будущем, приближаясь к почти непрерывному потоку блоков, и ее разработчики интегрируют адаптивные функции (такие как DAGKnight), которые регулируют скорость подтверждения в зависимости от условий. Мы приближаемся к практическим пределам масштабирования ончейн в децентрализованном контексте. Любые значительные дальнейшие достижения, вероятно, потребуют принципиально иных подходов (или согласия на централизацию). В этом смысле Kaspa -- это эффективная граница -- вы не можете получить значительно более высокую пропускную способность или меньшую задержку в масштабе без больших потерь или рисков, чем Kaspa. Она нашла баланс, который оптимально использует ресурсы.</p>
  <p>Для опытных криптопрофессионалов и исследователей Kaspa предлагает увлекательный кейс, где сходятся принципы термодинамики, теории информации и экономики. Она подтверждает идею о том, что децентрализованная финансовая сеть может быть проанализирована так же, как физическая система -- с энергетическими затратами, рабочими выходами и неэффективностью как энтропией. Уменьшая эти неэффективности, Kaspa не просто работает лучше; она фундаментально создает более устойчивую и привлекательную экономическую систему. Система с меньшими потерями означает, что работа майнеров приносит больше пользы, комиссии пользователей остаются ниже, и больше ценности циркулирует, а не сгорает в накладных расходах. Со временем это привлекает больше участников, больше инвестиций и усиливает сетевые эффекты. Это аналогично тому, как эффективный двигатель не только экономит топливо, но и открывает новые возможности -- более длительные поездки, более тяжелые грузы -- так и эффективный блокчейн позволяет осуществлять больше экономической активности и использовать сценарии, которые задушили бы более медленную цепь.</p>
  <p>В заключение, Kaspa можно рассматривать как кульминацию более чем десятилетнего исследования по масштабированию изобретения Накамото без потери его сути. Она показывает, что законы физики и здравая экономика не являются врагами децентрализации, а являются проводниками для ее улучшения. Успех Kaspa будет означать, что денежная система, которая наиболее точно следует пути наименьшего сопротивления и наименьшего производства энтропии, возобладает -- результат, тесно согласующийся с физикой. На практике Kaspa представляет собой высокопроизводительную, низкофрикционную, безопасную сеть, которая могла бы переносить ценность наций в рамках единого протокола, доступного для всех и ограниченного только скоростью света и честностью большинства. Если Биткойн открыл дверь в термодинамическую финансовую эру, то Kaspa ускоряет ее, делая поток экономической энергии таким же эффективным, как поток электронов. В великом повествовании о технологиях и деньгах Kaspa выделяется как убедительное доказательство того, что эффективность -- это судьба: из двух систем та, которая лучше минимизирует потери и максимизирует полезную работу, привлечет будущее. И Kaspa представляет убедительный и технически обоснованный аргумент в пользу того, что она является именно такой системой -- эволюционным скачком к безфрикционной, сохраняющей ценность и, в конечном итоге, более ориентированной на человека денежной сети.</p>

  <hr class="chapter-break">

  <h2 class="chapter-title" id="h.e01avawvoirc">Глава 13: Kaspa против порядка Биткойна</h2>
  <div class="img-container"><img alt="Kaspa против порядка Биткойна" src="images/image33.png"></div>
  <h3 class="section-title">Выбор и упорядочивание блоков: Самая тяжелая цепь против синей работы</h3>
  <h4 class="subsection-title">Правило самой тяжелой цепи Биткойна - Последовательный выбор</h4>
  <p>Механизм консенсуса Биткойна работает по линейному принципу, согласно которому сеть поддерживает одну цепочку блоков. Когда майнеры создают новые блоки одновременно, сеть сталкивается с выбором между конкурирующими цепочками. Правило самой тяжелой цепи решает эту проблему, выбирая цепочку с наибольшим накопленным доказательством работы, тем самым выбирая путь, который представляет наибольшие вычислительные инвестиции. Этот подход создает сценарий «победитель получает все», при котором выживает только одна цепочка, а все конкурирующие блоки становятся сиротскими. Сиротские блоки, хотя и содержат действительные транзакции и представляют реальную вычислительную работу, не вносят никакого вклада в безопасность сети или пропускную способность транзакций. Этот дизайн обеспечивает четкий порядок, но по своей сути ограничивает пропускную способность, поскольку на каждом уровне высоты может быть принят только один блок. В этом примере вы можете увидеть, как Биткойн отбрасывает блоки.</p>
  <div class="img-container"><img alt="Сиротские блоки в Биткойне" src="images/image38.png"></div>
  
  <h4 class="subsection-title">Выбор синей работы Kaspa - Параллельная интеграция</h4>
  <p>Протокол GHOSTDAG от Kaspa расширяет этот подход, работая в структуре ориентированного ациклического графа (DAG), где несколько блоков могут сосуществовать и способствовать безопасности сети. Вместо того чтобы отбрасывать конкурирующие блоки, GHOSTDAG классифицирует их как «синие» (честные, способствующие консенсусу) или «красные» (потенциально конфликтные, но все еще сохраняемые). Метрика «синяя работа» представляет собой накопленное доказательство работы только от синих блоков в DAG. Это избирательное накопление гарантирует, что только консенсусно-действительные блоки способствуют расчету безопасности, сохраняя при этом работу и транзакции красных блоков в общей структуре. В этом примере вы можете видеть, что блок, который был отброшен Биткойном, включен в DAG Kaspa, даже когда k = 0.</p>
  <div class="img-container"><img alt="Параллельная интеграция в Kaspa (синие и красные блоки)" src="images/image20.png"></div>
  
  <h4 class="subsection-title">Выбор родителя и формирование основной цепи</h4>
  <p>Когда новый блок входит в DAG, GHOSTDAG должен выбрать «Выбранного родителя» из нескольких возможных родительских кандидатов. Этот процесс выбора исследует значение «синей работы» каждого потенциального родителя и выбирает того, у кого наибольшее накопленное значение «синей работы» из честных блоков. Здесь представлен блок B, выбирающий лучшего родителя (родителя с наибольшей работой) среди своих родителей.</p>
  <div class="img-container"><img alt="Выбор родителя и формирование основной цепи" src="images/image39.png"></div>
  <p>Этот выбранный родитель становится основой для создания основной цепи в DAG. Основная цепь обеспечивает детерминированный механизм упорядочивания, аналогичный линейной цепи Биткойна, но работает в более сложной среде DAG. После выбора основного родителя протокол обрабатывает все оставшиеся блоки в так называемом «Mergeset» -- блоках, которые включены в DAG, но не были выбраны в качестве Выбранного родителя. После выбора родителя мы можем следовать за Выбранными родителями через DAG; это создает цепь, которую вы можете увидеть на изображении здесь.</p>
  <div class="img-container"><img alt="Следование за выбранными родителями через DAG" src="images/image10.png"></div>
  
  <h4 class="subsection-title">Упорядочивание и обработка транзакций</h4>
  <p>Основная цепь, созданная выбором «синей работы», служит основным механизмом упорядочивания для обработки транзакций. Транзакции обрабатываются сначала от Выбранного родителя, затем от блоков Mergeset в согласованном консенсусом порядке. Это создает детерминированную последовательность, которую могут воспроизвести все узлы, обеспечивая последовательное упорядочивание транзакций по всей сети.</p>

  <h3 class="section-title">Фундаментальные архитектурные различия</h3>
  <p><b>Подход Биткойна:</b> Создает одну линейную последовательность, где каждый блок имеет ровно одного родителя. Конфликты приводят к полному исключению конкурирующих блоков, при этом только выигрывающая цепь способствует безопасности сети.</p>
  <p><b>Подход Kaspa:</b> Поддерживает структуру DAG, где блоки могут иметь несколько родителей и детей. Конфликты разрешаются путем классификации, а не исключения, что позволяет нескольким блокам способствовать безопасности сети, сохраняя при этом консенсус через основную цепь.</p>

  <h3 class="section-title">Последствия для пропускной способности и безопасности</h3>
  <p>Линейный подход Биткойна предлагает сильные гарантии безопасности, но ограничивает пропускную способность примерно одним блоком каждые 10 минут. Отказ от конкурирующих блоков представляет собой трату вычислительных ресурсов и потерю пропускной способности транзакций.</p>
  <p>Система «синей работы» Kaspa обеспечивает гораздо более высокую пропускную способность при сохранении свойств безопасности. Сохраняя как синие, так и красные блоки в DAG, система захватывает большую часть вычислительной работы сети и пропускной способности транзакций. Основная цепь обеспечивает детерминированный порядок, несмотря на возросшую сложность, что позволяет создавать параллельные блоки без ущерба для надежности консенсуса.</p>

  <h3 class="section-title">Откат Биткойна в 2013 году: Урок окончательности</h3>
  <p>В марте 2013 года сеть Биткойн пережила критическое событие, которое противоречило ее фундаментальному принципу о том, что «самая длинная цепь является действительной цепью».</p>
  <ol>
      <li><strong>Разделение цепи:</strong> Майнер, использующий Bitcoin Core версии 0.8, произвел блок, несовместимый с более старыми версиями (0.7). Это вызвало разделение цепи (форк).</li>
      <li><strong>Социальная координация превзошла протокол:</strong> Хотя цепь 0.8 стала длиннее, основные разработчики и крупные майнинговые пулы социально скоординировались, чтобы отказаться от этой цепи и вернуться к более короткой, но совместимой цепи 0.7.</li>
      <li><strong>Окончательность была нарушена:</strong> 24 блока из цепи 0.8 были отброшены. Содержащиеся в них транзакции, когда-то считавшиеся действительными, были стерты из канонической истории Биткойна.</li>
  </ol>
  <p>Это событие доказало, что консенсус Биткойна не является чисто детерминированным и может требовать вмешательства человека. В Kaspa такие разделения невозможны. Все блоки, даже если они добываются одновременно, включаются в DAG, и GHOSTDAG выбирает упорядоченную историю последовательно и алгоритмически. Нет необходимости в откатах или социальной координации; окончательность детерминирована.</p>

  <hr class="chapter-break">
  
  <h2 class="chapter-title" id="chapter14">Глава 14: Видение Kaspa для Уровня 2: ZK Rollups и мосты</h2>
  <h3 class="section-title">Необходимость решений Уровня 2</h3>
  <p>Хотя Kaspa предлагает впечатляющую масштабируемость на своем базовом уровне (Уровень 1), будущее сложных децентрализованных приложений (DeFi, игры и т. д.) зависит от решений Уровня 2. Они позволяют выполнять сложные вычисления вне основной цепи, при этом используя ее безопасность. Kaspa фокусируется на «базовых ZK-Rollups», где Уровень 1 (Kaspa) служит уровнем секвенирования, доступности данных и расчетов.</p>
  
  <h3 class="section-title">Вызов: Доказательство во время включения против неопределенности выполнения</h3>
  <p>Параллельные L1, такие как Kaspa, вводят «неопределенность выполнения»: транзакции включаются в DAG до того, как будет определен их окончательный глобальный порядок. Это является преимуществом для устойчивости к MEV, поскольку предотвращает предсказание майнерами точной последовательности.</p>
  <p>Однако это создает конфликт с ZK-Rollups, которые в идеале требуют «доказательства во время включения». Для генерации ZK-доказательства необходимо знать и однозначно определить предварительное состояние. Но в Kaspa это состояние не определено во время включения из-за параллельной обработки.</p>
  <p>Решение Kaspa заключается в выборе многолидерного консенсуса и его неопределенности выполнения. Поэтому ZK-доказательства должны быть отложены и отправлены на L1 только после того, как порядок транзакций сойдется и будет установлено четкое состояние. Это создает новую проблему: что, если требуемое доказательство так и не поступит?</p>
  
  <h3 class="section-title">Расчет доказательства с ограничением по времени</h3>
  <p>Предлагаемая модель -- «расчет доказательства с ограничением по времени».</p>
  <ol>
      <li>Данные транзакции сначала публикуются на L1 (доступность данных).</li>
      <li>Окончательный расчет ее эффектов на L1 зависит от представления и проверки ZK-доказательства в течение определенного временного окна (T).</li>
      <li>Если сторона, участвующая в операции, не предоставит свое доказательство в течение этого срока, операция завершится неудачей, с наложением штрафов для обеспечения подотчетности.</li>
  </ol>
  <p>Эта модель позволяет быстро получать оптимистичные подтверждения на стороне пользователя, задолго до окончательного расчета на L1, поскольку каждый роллап напрямую заинтересован в предоставлении своего доказательства для поддержания своей собственной «живучести».</p>
  
  <h3 class="section-title">KIP-15 и архивные узлы принятых транзакций (ATANs)</h3>
  <p>Фундаментальная проблема для L2 на Kaspa -- это обрезка. Как L2 может ссылаться на данные транзакций, которые были обрезаны из L1? ZK-доказательства -- это долгосрочное решение, но необходимо промежуточное решение.</p>
  <p>В этом и заключается цель KIP-15: внедрение <strong>архивных узлов принятых транзакций (ATANs)</strong>. ATAN находится между обрезанным полным узлом и полным архивным узлом.</p>
  <ul>
      <li>Он не хранит полные данные транзакций.</li>
      <li>Он хранит заголовки выбранной цепи и <strong>хеши</strong> всех транзакций.</li>
  </ul>
  <p>Хеш транзакции составляет всего 32 байта, что представляет собой значительное сжатие по сравнению с самой транзакцией. ATAN может хранить годы истории хешей транзакций с разумными требованиями к хранению (оценивается примерно в 3-5 ТБ в год при полной загрузке). Это позволяет L2 доказывать существование и порядок любой прошлой транзакции без необходимости полного архивного узла, тем самым решая проблему доступности данных в обрезанной среде.</p>
  
  <h3 class="section-title">Канонический дизайн моста L1<>L2</h3>
  <p>Для обеспечения потока средств (KAS) между L1 и L2 необходим «канонический мост».</p>
  <ul>
      <li><strong>Входящие (L1 в L2):</strong> Пользователь отправляет KAS на статический адрес делегирования на L1. Эта операция немедленно проверяется L1, и средства становятся доступными для использования на L2 почти мгновенно.</li>
      <li><strong>Исходящие (L2 в L1):</strong> Исходящая транзакция требует внутренней авторизации на L2. Ее действительность должна быть подтверждена на L1 путем предоставления ZK-доказательства.</li>
  </ul>
  <p>Для этого Kaspa использует скрипты «делегирования». Вместо отправки средств на адрес состояния роллапа (который является динамическим), пользователи отправляют их на статические адреса, которые делегируют свои полномочия по расходованию средств ZK-доказательству, предоставленному роллапом. Это упрощает пользовательский опыт и управление средствами моста.</p>

  <hr class="chapter-break">

  <h2 class="chapter-title" id="chapter15">Глава 15: Сеть Igra: Пример ZK Rollup, совместимого с EVM, от Kaspa</h2>
  <h3 class="section-title">Обзор Igra</h3>
  <p>Сеть Igra -- это отличный практический пример видения Kaspa для Уровня 2. Это <strong>ZK Rollup, совместимый с EVM</strong>, который уникальным образом использует BlockDAG Kaspa в качестве децентрализованного секвенсора и уровня расчетов.</p>
  <p>Эта архитектура направлена на сочетание безопасности, подобной Биткойну, со скоростью и универсальностью современных программируемых цепей, решая критические ограничения текущих решений Уровня 2.</p>
  
  <h3 class="section-title">Ключевые компоненты</h3>
  <ul>
      <li><strong>Базовый уровень (Kaspa):</strong> Служит децентрализованным секвенсором. Порядок транзакций Igra фиксируется в BlockDAG Kaspa ее майнинг-узлами.</li>
      <li><strong>Узел Igra:</strong> Поддерживает полное состояние L2 и выполняет транзакции EVM. Он извлекает упорядоченные транзакции из L1 и выполняет их.</li>
      <li><strong>Igra Relay / RPC:</strong> Обеспечивает мост между пользователями и сетью. Он предоставляет стандартные интерфейсы Ethereum RPC, позволяя пользователям взаимодействовать с Igra с помощью кошельков, таких как MetaMask.</li>
  </ul>
  
  <h3 class="section-title">Механизм моста и развертывание</h3>
  <p>Igra использует многофазный подход к мосту для своего нативного токена $iKAS, который является обернутой версией KAS.</p>
  <ol>
      <li><strong>Фаза 1 (Мост сообщества):</strong> Изначально мост полагается на мультиподписной (m-из-n) кошелек, контролируемый подписантами, выбранными сообществом. Это модель доверия, аналогичная той, что используется для фондов сообщества многих криптовалют. Для вывода средств подписанты обязаны обрабатывать запросы, с гарантиями, обеспечивающими переход к бездоверительной системе.</li>
      <li><strong>Фаза 2 (Мост MPC/ZK):</strong> В будущем этот мост будет заменен бездоверительным решением.
          <ul>
              <li><strong>Мост MPC (многосторонняя вычислительная система):</strong> Использует криптографические методы, такие как FROST, чтобы позволить набору валидаторов подписывать транзакции без того, чтобы кто-либо из них владел полным секретным ключом. Это позволяет осуществлять безразрешительный мост.</li>
              <li><strong>Мост ZK:</strong> Окончательное решение. Пользователь может отправить ZK-доказательство на L1, доказывающее, что он сжег $iKAS на L2. Скрипт на L1 проверит это доказательство и разблокирует соответствующую сумму KAS.</li>
          </ul>
      </li>
  </ol>
  
  <h3 class="section-title">Тестовая сеть Caravel</h3>
  <p>Развертывание Igra осуществляется поэтапно, начиная с тестовой сети «Caravel». Этот запуск проходит в несколько этапов:</p>
  <ol>
      <li><strong>Активация:</strong> Сеть активируется в тестовой сети Kaspa.</li>
      <li><strong>Тестеры сообщества:</strong> Программное обеспечение узла распространяется среди ограниченной группы тестировщиков для постепенного увеличения сетевой активности.</li>
      <li><strong>Публичный доступ:</strong> Программное обеспечение становится общедоступным, позволяя любому запускать узел и участвовать.</li>
  </ol>
  <p>Этот тщательный процесс развертывания крайне важен, поскольку Caravel переносит полный протокол Ethereum в консенсус Kaspa, который работает на скоростях, еще не исследованных в мире EVM. Интенсивное тестирование и несколько итераций необходимы для обеспечения стабильности и производительности.</p>

  <hr class="chapter-break">

  <h2 class="chapter-title" id="chapter16">Глава 16: Пропускная способность транзакций и коллизии в BlockDAG Kaspa</h2>
  <h3 class="section-title">Проблема коллизий транзакций</h3>
  <p>Что делает DAG невероятно быстрыми, так это способность к распараллеливанию: поскольку блоки, созданные параллельно, считаются действительными, увеличение скорости параллельных блоков не наносит ущерба безопасности. Однако возникает вопрос: если мы создаем 10 блоков в секунду, действительно ли наша пропускная способность транзакций в 10 раз выше?</p>
  <p>Не совсем. Нюанс заключается в том, что параллельные блоки могут содержать одну и ту же транзакцию, и несправедливо считать одну и ту же транзакцию несколько раз. Нас должна интересовать <strong>эффективная TPS</strong>, то есть количество уникальных транзакций, включенных в среднем.</p>
  
  <h3 class="section-title">Анализ случайного выбора</h3>
  <p>Предполагая, что майнеры выбирают транзакции для включения случайным образом (что является разумным приближением, как мы увидим), мы можем проанализировать эффективную TPS.</p>
  <p>Математический анализ показывает, что даже в худшем случае (когда емкость блока точно соответствует количеству доступных транзакций в мемпуле) сеть включает не менее <strong>(1 - 1/e) ≈ 62,3%</strong> уникальных транзакций. Это нижний предел; на практике, когда мемпул больше емкости блока, эффективность стремится к 100%.</p>
  <p>В результате эффективная TPS увеличивается почти линейно с увеличением скорости блоков. 10-кратное увеличение скорости блоков приводит к 8-9-кратному увеличению эффективной TPS, что является значительным улучшением.</p>
  
  <h3 class="section-title">А как насчет нечестных майнеров?</h3>
  <p>Можно опасаться, что «жадные» майнеры попытаются манипулировать выбором транзакций для максимизации своей прибыли, например, все выбирая одни и те же транзакции с высокими комиссиями, что увеличит коллизии и снизит эффективную TPS.</p>
  <p>Теория игр показывает нам, что это не оптимальная стратегия. Случайный выбор -- это «слабое равновесие». Это означает, что если один майнер отклонится от этой стратегии, он может получить небольшое преимущество. Однако, если многие майнеры отклонятся и все выберут одни и те же транзакции с высокими комиссиями, они в конечном итоге будут напрямую конкурировать за те же комиссии, и их ожидаемая прибыль уменьшится. В конце концов, наиболее рациональная стратегия для майнера (который не может предсказать, что будут делать другие) -- это диверсифицировать свой выбор, что приближается к случайному выбору.</p>
  
  <h3 class="section-title">Потенциальные решения для высоких коллизий</h3>
  <p>Если на практике будет наблюдаться высокая частота коллизий, можно реализовать несколько решений:</p>
  <ol>
      <li><strong>Разбиение транзакций на корзины:</strong> Блоки могут быть обязаны включать только транзакции, хеш которых соответствует определенным цифрам собственного хеша блока. Это разделит транзакции на «корзины», и блоки будут конкурировать только за транзакции в одной корзине.</li>
      <li><strong>Механизм монополистического аукциона:</strong> Механизм, при котором майнеры могут включать любые транзакции, которые они хотят, но комиссии за все транзакции в блоке устанавливаются на уровне самой низкой комиссии среди включенных транзакций. Это стимулирует майнеров включать больше транзакций (для увеличения объема), а не фокусироваться только на тех, которые приносят наибольшую прибыль, что естественным образом способствует диверсификации.</li>
  </ol>
  <p>В заключение, хотя коллизии транзакций являются важным фактором в BlockDAG, архитектура Kaspa и динамика теории игр гарантируют, что эффективная пропускная способность остается высокой и надежно масштабируется с увеличением скорости блоков.</p>

  <hr class="chapter-break">

  <h2 class="chapter-title" id="chapter17">Глава 17: Рынок комиссий Kaspa: Теоретико-игровая перспектива</h2>
  <h3 class="section-title">Важность рынка комиссий</h3>
  <p>Рынок комиссий криптовалюты чрезвычайно важен для ее долгосрочной безопасности. Как только вознаграждение за блок становится незначительным, комиссии за транзакции остаются основным субсидированием безопасности сети. Поэтому крайне важно понимать динамику рынка комиссий, которую вызывает протокол.</p>
  
  <h3 class="section-title">Три зла рынка комиссий Биткойна</h3>
  <p>Рынок комиссий Биткойна, из-за его консенсуса «один лидер за раунд», демонстрирует свойства, которые можно описать как «три зла»:</p>
  <ol>
      <li><strong>Гонка ко дну:</strong> Когда сеть не перегружена, спрос ниже предложения места в блоке. У пользователей нет стимула платить высокие комиссии, так как их транзакции все равно будут включены. Комиссии стремятся к минимуму, что может сделать майнинг нерентабельным и угрожать безопасности сети.</li>
      <li><strong>Аберрация цен:</strong> Когда сеть перегружена, очень небольшое увеличение комиссий может привести к тому, что транзакция перейдет из состояния «никогда не включена» в состояние «включена в следующий блок». Цена не отражает постепенного обслуживания.</li>
      <li><strong>Голод:</strong> В перегруженной сети транзакции с низкими комиссиями могут быть постоянно исключены, так как они никогда не смогут перебить транзакции с высокими комиссиями. Это создает барьер для входа и поднимает вопросы об эгалитарном этосе блокчейна.</li>
  </ol>
  <p>Эти динамики являются прямым следствием того, что один майнер выигрывает весь банк в каждом раунде.</p>
  
  <h3 class="section-title">Как многолидерный BlockDAG Kaspa улучшает рынок комиссий</h3>
  <p>В Kaspa несколько майнеров создают блоки параллельно в каждом раунде (многолидеры). Если несколько майнеров включают одну и ту же транзакцию, они делят вознаграждение вероятностным образом. Это радикально меняет динамику игры для майнеров и пользователей.</p>
  <ul>
      <li><strong>Против гонки ко дну:</strong> Поскольку майнеры конкурируют, для них становится рациональным включать транзакции, даже если сеть используется лишь частично, чтобы диверсифицировать свои потоки доходов и избежать прямой конкуренции. Анализ показывает, что рынок комиссий активируется, как только сеть достигает <strong>1/k</strong> своей пропускной способности (где k -- количество лидеров за раунд), вместо 100% для Биткойна. При 10 лидерах за раунд рынок активируется, как только используется 10% пропускной способности.</li>
      <li><strong>Против голода и аберрации:</strong> У майнеров есть стимул включать смесь транзакций, в том числе с более низкими комиссиями. Не всегда оптимально бороться за несколько самых высокооплачиваемых транзакций, так как вероятность получения этих комиссий снижается из-за конкуренции. Это создает гораздо более плавную кривую обслуживания: небольшое увеличение комиссий приводит к небольшому увеличению вероятности включения, а не к внезапному изменению. Транзакции с низкими комиссиями по-прежнему имеют шанс (хотя и небольшой) быть включенными, что предотвращает голод. Низкая вероятность включения в раунд приводит к разумному среднему времени ожидания, а не к бесконечному ожиданию.</li>
  </ul>
  <p>В заключение, многолидерная архитектура Kaspa, являющаяся прямым следствием ее высокочастотного BlockDAG, создает изначально более здоровый, стабильный и справедливый рынок комиссий. Сглаживая крайнюю динамику «все или ничего» блокчейнов с одним лидером, Kaspa строит более прочную экономическую основу для своей долгосрочной безопасности.</p>

  <hr class="chapter-break">

  <h2 class="chapter-title" id="conclusion">Заключение</h2>
  <div class="conclusion">
    <p>В конце этого путешествия по архитектуре и философии Kaspa напрашивается один вывод: мы являемся свидетелями настоящей эволюции в области технологий распределенных реестров. Kaspa -- это не просто еще одна криптовалюта; это фундаментальный пересмотр принципов, установленных Биткойном, разработанный для высокоскоростной цифровой эпохи.</p>
    <p>Мы видели, как ее BlockDAG, управляемый протоколом консенсуса GHOSTDAG, разбирает узкое место линейной цепи. Позволяя параллельное создание и интеграцию блоков, Kaspa устраняет потери от сиротских блоков, максимизирует энергоэффективность доказательства работы и достигает скоростей транзакций и подтверждений, ранее считавшихся невозможными для децентрализованной системы PoW.</p>
    <p>Мы изучили ее гениальные решения для хранения данных с многоуровневой системой обрезки, которая обеспечивает долгосрочную децентрализацию за счет поддержания низких требований к оборудованию для узлов. Мы также углубились в ее видение будущего с решениями второго уровня, такими как ZK-Rollups, которые обещают привнести сложную программируемость и совместимость без ущерба для безопасности базового уровня.</p>
    <p>Kaspa показывает нам, что трилемма блокчейна -- идея о том, что нужно выбирать между безопасностью, масштабируемостью и децентрализацией -- может быть не неизменным законом, а скорее ограничением архитектур первого поколения. Черпая вдохновение из принципов физики и экономики, Kaspa разработала систему, которая стремится к максимальной эффективности, минимальному трению и оптимальному сохранению стоимости.</p>
    <p>Будущее Kaspa многообещающе. С обновлениями, такими как DAGKnight, которые формализуют окончательность, и продолжающимися исследованиями в области устойчивости к MEV и оракулов, проект продолжает раздвигать границы возможного. Станет ли Kaspa основой следующего поколения децентрализованных приложений или будет сосуществовать с другими системами, одно можно сказать наверняка: она уже оставила неизгладимый след в истории криптовалют, доказав, что денежная система может быть одновременно твердой, как золото, и быстрой, как свет.</p>
    <p>Мы надеемся, что эта книга дала вам ключи к пониманию глубины и элегантности Kaspa. Путешествие только начинается, и лучший способ продолжить его -- это участвовать, задавать вопросы и продолжать учиться.</p>
  </div>

  <hr class="chapter-break">

  <h2 class="chapter-title" id="appendixA">Приложение А: Дополнительные ресурсы</h2>
  <p>Для тех, кто хочет углубить свое понимание Kaspa, вот список основных ресурсов, от вводных статей до фундаментальных исследовательских работ.</p>
  
  <h4>Статьи для начинающих</h4>
  <ul>
    <li><strong>Kaspa 101</strong>: Отличная отправная точка для понимания работы GHOSTDAG. <a href="https://michaelsutton.github.io/2022-04-23-kaspa-101-part1/">Читать здесь</a></li>
    <li><strong>Масштабирование Биткойна с помощью BlockDAG</strong>: Объясняет, почему BlockDAG является жизнеспособным решением ограничений Биткойна. <a href="https://someone235.medium.com/scaling-bitcoin-with-blockdag-d785174a3402">Читать здесь</a></li>
    <li><strong>Введение в обрезку Kaspa</strong>: Введение в механизм обрезки Kaspa. <a href="https://hashdag.medium.com/in-which-mayday-mayday-we-are-syncing-about-bf05ad58957a">Читать здесь</a></li>
    <li><strong>Kaspa GhostDAG 101 (Видео)</strong>: Всеобъемлющий видеообзор технических концепций. <a href="https://www.youtube.com/watch?v=nhI2zo44dfc">Смотреть здесь</a></li>
  </ul>

  <h4>Исследовательские работы (Глубокое погружение)</h4>
  <ul>
    <li><strong>PHANTOM и GHOSTDAG</strong>: Академическая статья, заложившая основу консенсуса Kaspa. <a href="https://eprint.iacr.org/2018/104.pdf">Читать PDF</a></li>
    <li><strong>Протокол DAGKnight</strong>: Протокол консенсуса нового поколения Kaspa, разработанный для быстрой окончательности и устойчивости к атакам. <a href="https://eprint.iacr.org/2022/1494.pdf">Читать PDF</a></li>
    <li><strong>Prunality</strong>: Статья, подробно описывающая теорию механизма обрезки Kaspa. <a href="https://github.com/kaspanet/docs/blob/main/Reference/prunality/Prunality.pdf">Читать PDF</a></li>
    <li><strong>Белая книга Биткойна</strong>: Оригинальная статья Сатоши Накамото для исторического контекста. <a href="https://bitcoin.org/bitcoin/bitcoin.pdf">Читать PDF</a></li>
  </ul>

  <h4>Код и разработка</h4>
  <ul>
    <li><strong>Rusty-Kaspa (Основной репозиторий)</strong>: Исходный код узла Kaspa, написанный на Rust. <a href="https://github.com/kaspanet/rusty-kaspa">Смотреть на GitHub</a></li>
    <li><strong>Предложения по улучшению Kaspa (KIPs)</strong>: Репозиторий, содержащий все предложения по улучшению Kaspa. <a href="https://github.com/kaspanet/kips">Смотреть на GitHub</a></li>
  </ul>

  <h4>Сообщество и обсуждение</h4>
  <ul>
    <li><strong>Discord</strong>: Основное место для технических и общественных обсуждений. Рекомендуемые каналы: <code>#research-general</code>, <code>#development</code>. <a href="https://discord.gg/kaspa">Присоединиться к Discord</a></li>
    <li><strong>Telegram (R&D)</strong>: Группа, где сотрудничают разработчики и исследователи. <a href="https://t.me/kasparnd">Присоединиться в Telegram</a></li>
    <li><strong>Исследовательский форум</strong>: Для углубленных обсуждений KIP и новых технических концепций. <a href="https://research.kas.pa/">Посетить форум</a></li>
  </ul>

  <hr class="chapter-break">
  
  <h2 class="chapter-title" id="appendixB">Приложение Б: Математический анализ коллизий транзакций (упрощенно)</h2>
  <p>В этой главе рассматривается вопрос эффективной TPS (транзакций в секунду) в BlockDAG. Когда несколько блоков создаются параллельно, они могут содержать одни и те же транзакции, что снижает уникальную пропускную способность. Анализ показывает, что даже при случайном выборе транзакций майнерами эффективная пропускная способность остается высокой.</p>
  <p>Ключевая идея заключается в том, что вероятность того, что два майнера выберут одну и ту же транзакцию, уменьшается по мере увеличения пула ожидающих транзакций (мемпула). Математический анализ (с использованием теории вероятностей и рядов Тейлора) показывает, что даже в сценарии, когда емкость блока точно соответствует количеству доступных транзакций, сеть включает не менее <strong>(1 - 1/e) ≈ 62,3%</strong> уникальных транзакций. Этот показатель представляет собой минимум; на практике эффективность часто бывает намного выше.</p>
  <p>Кроме того, теория игр предполагает, что у майнеров нет существенного стимула отклоняться от этого квазислучайного выбора. Если все майнеры попытаются выбрать транзакции с самыми высокими комиссиями, они в конечном итоге будут конкурировать за те же комиссии, что уменьшит их ожидаемую прибыль. Стратегия диверсификации (случайный выбор) является, следовательно, стабильным равновесием («слабым равновесием»).</p>
  <p>В итоге, параллелизм Kaspa не наносит существенного вреда эффективной пропускной способности, которая увеличивается почти линейно с увеличением скорости блоков.</p>

  <hr class="chapter-break">

  <h2 class="chapter-title" id="appendixC">Приложение В: Математический анализ рынка комиссий (упрощенно)</h2>
  <p>В этой главе анализируется динамика рынка комиссий с использованием теории игр, сравнивая модель «одного лидера» Биткойна с моделью «многих лидеров» Kaspa.</p>
  <h4>Три зла рынка комиссий Биткойна:</h4>
  <ol>
    <li><strong>Гонка ко дну</strong>: Когда сеть не перегружена, у пользователей нет стимула платить высокие комиссии, так как их транзакции все равно будут включены. Комиссии стремятся к минимуму, что угрожает долгосрочной безопасности сети.</li>
    <li><strong>Аберрация цен</strong>: Когда сеть перегружена, очень небольшое увеличение комиссий может привести к тому, что транзакция перейдет из состояния «никогда не включена» в состояние «включена в следующий блок». Цена не отражает постепенного обслуживания.</li>
    <li><strong>Голод</strong>: В перегруженной сети транзакции с низкими комиссиями могут быть постоянно исключены, создавая барьер для входа для менее состоятельных пользователей.</li>
  </ol>
  <h4>Как BlockDAG Kaspa решает эти проблемы:</h4>
  <p>В Kaspa несколько майнеров создают блоки параллельно (многолидеры). Если несколько майнеров включают одну и ту же транзакцию, они делят вознаграждение (вероятностно). Это радикально меняет динамику:</p>
  <ul>
    <li><strong>Против гонки ко дну</strong>: Поскольку майнеры конкурируют, для них становится рациональным включать транзакции, даже если сеть используется лишь частично. Анализ показывает, что рынок комиссий активируется, как только сеть достигает <strong>1/k</strong> своей пропускной способности (где k -- количество лидеров за раунд), вместо 100% для Биткойна. При 10 лидерах за раунд рынок активируется, как только используется 10% пропускной способности.</li>
    <li><strong>Против голода и аберрации</strong>: У майнеров есть стимул включать смесь транзакций, в том числе с более низкими комиссиями. Не всегда оптимально бороться за несколько самых высокооплачиваемых транзакций, так как вероятность получения этих комиссий снижается из-за конкуренции. Это создает более плавную кривую обслуживания: небольшое увеличение комиссий приводит к небольшому увеличению вероятности включения, а не к внезапному изменению. Транзакции с низкими комиссиями по-прежнему имеют шанс быть включенными, что предотвращает голод.</li>
  </ul>
  <p>В заключение, многолидерная архитектура Kaspa создает более здоровый, стабильный и справедливый рынок комиссий, что крайне важно для долгосрочной безопасности и жизнеспособности протокола.</p>

</div>
</body>
</html>